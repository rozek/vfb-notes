{"version":3,"file":"index.js","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","../node_modules/tweetnacl/nacl-fast.js","../src/Globals.js","../node_modules/style-inject/dist/style-inject.es.js","../src/ReencryptionFailureNotice.svelte","../src/DecryptionFailureNotice.svelte","../src/MultiInstanceNotice.svelte","../src/CommunicationFailureNotice.svelte","../src/UnregisteredNotice.svelte","../src/UnregistrationNotice.svelte","../node_modules/voltcloud-for-browsers/dist/voltcloud-for-browsers.esm.js","../src/UnregistrationDialog.svelte","../src/LogoutNotice.svelte","../src/NameChangedNotice.svelte","../src/NameChangeNotice.svelte","../src/NameChangeDialog.svelte","../src/PasswordChangeFailureNotice.svelte","../src/PasswordChangedNotice.svelte","../src/PasswordChangeNotice.svelte","../node_modules/@stablelib/base64/lib/base64.js","../src/PasswordChangeDialog.svelte","../src/EMailChangeFailureNotice.svelte","../src/EMailChangedNotice.svelte","../src/EMailChangeNotice.svelte","../node_modules/javascript-interface-library/dist/javascript-interface-library.esm.js","../src/EMailChangeDialog.svelte","../src/LoginFailureNotice.svelte","../src/LoginNotice.svelte","../src/LoginDialog.svelte","../src/PasswordResetSuccessNotice.svelte","../src/PasswordResetNotice.svelte","../src/PasswordResetDialog.svelte","../src/ResetRequestedNotice.svelte","../src/ResetRequestNotice.svelte","../src/ResetRequestDialog.svelte","../src/ConfirmedNotice.svelte","../src/ConfirmationNotice.svelte","../src/RenewedNotice.svelte","../src/RenewalNotice.svelte","../src/RenewalDialog.svelte","../src/RegistrationFailureNotice.svelte","../src/RegistrationSuccessNotice.svelte","../src/RegistrationNotice.svelte","../src/RegistrationDialog.svelte","../src/Overlay.svelte","../src/NotePage.svelte","../src/LegalPage.svelte","../src/InfoPage.svelte","../node_modules/svelte-viewport-info/dist/svelte-viewport-info.esm.js","../src/ApplicationCell.svelte","../src/App.svelte","../src/index.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root.host) {\n        return root;\n    }\n    return document;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => svg ? svg_element(name) : element(name));\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.1' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","  import { writable } from 'svelte/store'\n\n  import { hash, secretbox } from 'tweetnacl'\n\n  const { subscribe, set, update } = writable({\n    ApplicationURL:    'https://vfb-notes.volt.live/',\n    ApplicationId:     'd3CX6D',\n    AccessToken:       sessionStorage['vfb-notes: access-token'] || '',\n    ConfirmationToken: '',\n    ResetToken:        '',\n    EMailAddress:      localStorage['vfb-notes: email-address']  || '',\n    Password:          sessionStorage['vfb-notes: password']     || '',\n    loggedIn:          false,\n    firstName:         '',\n    lastName:          '',\n    State:             '',\n    EncryptionKey:     undefined,\n    FailureReason:     ''\n  })\n\n  function define (KeyOrObject, Value) {\n    if (typeof(KeyOrObject) === 'string') {\n      update((Globals) => { Globals[KeyOrObject] = Value; return Globals })\n      switch (KeyOrObject) {\n        case 'AccessToken': sessionStorage['vfb-notes: access-token']  = Value; break\n        case 'EMailAddress':  localStorage['vfb-notes: email-address'] = Value; break\n        case 'Password':    sessionStorage['vfb-notes: password']      = Value\n          let PasswordHash  = hash(new TextEncoder().encode(Value))\n          let EncryptionKey = PasswordHash.slice(0,secretbox.keyLength)\n          update((Globals) => { Globals['EncryptionKey'] = EncryptionKey; return Globals })\n      }\n    } else {\n      update((Globals) => Object.assign(Globals,KeyOrObject))\n\n      if ('AccessToken' in KeyOrObject) {\n        sessionStorage['vfb-notes: access-token'] = KeyOrObject['AccessToken']\n      }\n\n      if ('EMailAddress' in KeyOrObject) {\n        localStorage['vfb-notes: email-address'] = KeyOrObject['EMailAddress']\n      }\n\n      if ('Password' in KeyOrObject) {\n        sessionStorage['vfb-notes: password'] = KeyOrObject['Password']\n\n        let PasswordHash  = hash(new TextEncoder().encode(KeyOrObject['Password']))\n        let EncryptionKey = PasswordHash.slice(0,secretbox.keyLength)\n        update((Globals) => { Globals['EncryptionKey'] = EncryptionKey; return Globals })\n      }\n    }\n  }\n\n  export const Globals = { subscribe, define }\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Reencryption Failure</div>\n\n    <div class=\"Block\">\n      Your password has been changed, but the note text found on VoltCloud\n      could not be reencrypted because of the following reason:\n    </div>\n\n    <div class=\"Block\" style=\"\n      margin:0px 10px 10px 10px; font-size:12px; font-style:italic; color:red\n    \">\n      {$Globals.FailureReason}\n    </div>\n\n    <div class=\"Block\">\n      If you know the password with which the text was originally encrypted, you\n      may try to log-out and then to reset(!) your password in order to continue\n      working with the note. Important: do not \"change\" your password right now,\n      that will not help! However, you may \"change\" it again after having reset\n      it to its original value.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Decryption Failure</div>\n\n    <div class=\"Block\">\n      The note text found on VoltCloud could not be decrypted. Such a situation\n      may occur after a password reset or a password change from one browser\n      followed by a save from another one.\n    </div>\n\n    <div class=\"Block\">\n      If you know the password with which the text was encrypted, you may try\n      to log-out and then to reset(!) your password. Important: do not\n      just \"change\" your password, that will not help!\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Multiple Instances</div>\n\n    <div class=\"Block\">\n      There seem to be multiple instances of \"VfB-Notes\" running in this\n      browser.\n    </div>\n\n    <div class=\"Block\">\n      This should be avoided because multiple simultaneously running instances\n      of this application in the same browser may disturb each other and cause\n      unforeseen and annoying effects.\n    </div>\n\n    <div class=\"Block\">\n      Please, close them all but one.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Communication Failure</div>\n\n    <div class=\"Block\">\n      Network communication with <a href=\"https://voltcloud.io/\">VoltCloud.io</a>\n      failed for the following reason:\n    </div>\n\n    <div class=\"Block\" style=\"\n      margin:0px 10px 10px 10px; font-size:12px; font-style:italic; color:red\n    \">\n      {$Globals.FailureReason}\n    </div>\n\n    <div class=\"Block\">\n      The best course of action will be to try again later.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','Registration')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Account Deleted</div>\n\n    <div class=\"Block\">\n      Your account was successfully deleted.\n    </div>\n\n    <div class=\"Block\">\n      If you want to use this application again, you will have to register anew.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Account is being deleted...</div>\n  </div>\n</div>\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\n//----------------------------------------------------------------------------//\n/**** throwError - simplifies construction of named errors ****/\nfunction throwError(Message) {\n    var Match = /^([$a-zA-Z][$a-zA-Z0-9]*):\\s*(\\S.+)\\s*$/.exec(Message);\n    if (Match == null) {\n        throw new Error(Message);\n    }\n    else {\n        var namedError = new Error(Match[2]);\n        namedError.name = Match[1];\n        throw namedError;\n    }\n}\n/**** ValueIsString ****/\nfunction ValueIsString(Value) {\n    return (typeof Value === 'string') || (Value instanceof String);\n}\n/**** ValueIs[Non]EmptyString ****/\nvar emptyStringPattern = /^\\s*$/;\nfunction ValueIsNonEmptyString(Value) {\n    return ((typeof Value === 'string') || (Value instanceof String)) && !emptyStringPattern.test(Value.valueOf());\n}\n/**** ValueIsStringMatching ****/\nfunction ValueIsStringMatching(Value, Pattern) {\n    return ((typeof Value === 'string') || (Value instanceof String)) && Pattern.test(Value.valueOf());\n}\n/**** ValueIsPlainObject ****/\nfunction ValueIsPlainObject(Value) {\n    return ((Value != null) && (typeof Value === 'object') &&\n        (Object.getPrototypeOf(Value) === Object.prototype));\n}\n/**** ValueIsArray ****/\nvar ValueIsArray = Array.isArray;\n/**** ValueIsEMailAddress ****/\nvar EMailAddressPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n// see https://stackoverflow.com/questions/201323/how-to-validate-an-email-address-using-a-regular-expression\nfunction ValueIsEMailAddress(Value) {\n    return ValueIsStringMatching(Value, EMailAddressPattern);\n}\n/**** ValueIsURL ****/\nvar noCtrlCharsOrWhitespacePattern = /^[^\\s\\x00-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]*$/;\nfunction ValueIsURL(Value) {\n    if (!ValueIsStringMatching(Value, noCtrlCharsOrWhitespacePattern) ||\n        (Value === '')) {\n        return false;\n    }\n    try {\n        new URL(Value, 'file://');\n        return true;\n    }\n    catch (Signal) {\n        return false;\n    }\n}\n//------------------------------------------------------------------------------\n//--                      Argument Validation Functions                       --\n//------------------------------------------------------------------------------\nvar rejectNil = false;\nvar acceptNil = true;\n/**** validatedArgument ****/\nfunction validatedArgument(Description, Argument, ValueIsValid, NilIsAcceptable, Expectation) {\n    if (Argument == null) {\n        if (NilIsAcceptable) {\n            return Argument;\n        }\n        else {\n            throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n        }\n    }\n    else {\n        if (ValueIsValid(Argument)) {\n            switch (true) {\n                case Argument instanceof Boolean:\n                case Argument instanceof Number:\n                case Argument instanceof String:\n                    return Argument.valueOf(); // unboxes any primitives\n                default:\n                    return Argument;\n            }\n        }\n        else {\n            throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is no valid \" + escaped(Expectation));\n        }\n    }\n}\n/**** ValidatorForClassifier ****/\nfunction ValidatorForClassifier(Classifier, NilIsAcceptable, Expectation) {\n    var Validator = function (Description, Argument) {\n        return validatedArgument(Description, Argument, Classifier, NilIsAcceptable, Expectation);\n    };\n    var ClassifierName = Classifier.name;\n    if ((ClassifierName != null) && /^ValueIs/.test(ClassifierName)) {\n        var ValidatorName = ClassifierName.replace(// derive name from validator\n        /^ValueIs/, NilIsAcceptable ? 'allow' : 'expect');\n        return FunctionWithName(Validator, ValidatorName);\n    }\n    else {\n        return Validator; // without any specific name\n    }\n}\n/**** FunctionWithName (works with older JS engines as well) ****/\nfunction FunctionWithName(originalFunction, desiredName) {\n    if (originalFunction == null) {\n        throwError('MissingArgument: no function given');\n    }\n    if (typeof originalFunction !== 'function') {\n        throwError('InvalidArgument: the given 1st Argument is not a JavaScript function');\n    }\n    if (desiredName == null) {\n        throwError('MissingArgument: no desired name given');\n    }\n    if ((typeof desiredName !== 'string') && !(desiredName instanceof String)) {\n        throwError('InvalidArgument: the given desired name is not a string');\n    }\n    if (originalFunction.name === desiredName) {\n        return originalFunction;\n    }\n    try {\n        Object.defineProperty(originalFunction, 'name', { value: desiredName });\n        if (originalFunction.name === desiredName) {\n            return originalFunction;\n        }\n    }\n    catch (signal) { /* ok - let's take the hard way */ }\n    var renamed = new Function('originalFunction', 'return function ' + desiredName + ' () {' +\n        'return originalFunction.apply(this,Array.prototype.slice.apply(arguments))' +\n        '}');\n    return renamed(originalFunction);\n} // also works with older JavaScript engines\nvar expectNonEmptyString = /*#__PURE__*/ ValidatorForClassifier(ValueIsNonEmptyString, rejectNil, 'non-empty literal string');\nvar expectPlainObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsPlainObject, rejectNil, '\"plain\" JavaScript object');\nvar expectEMailAddress = /*#__PURE__*/ ValidatorForClassifier(ValueIsEMailAddress, rejectNil, 'valid EMail address');\nvar expectURL = /*#__PURE__*/ ValidatorForClassifier(ValueIsURL, rejectNil, 'valid URL');\n/**** escaped - escapes all control characters in a given string ****/\nfunction escaped(Text) {\n    var EscapeSequencePattern = /\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}|\\\\[0bfnrtv'\"\\\\\\/]?/g;\n    var CtrlCharCodePattern = /[\\x00-\\x1f\\x7f-\\x9f]/g;\n    return Text\n        .replace(EscapeSequencePattern, function (Match) {\n        return (Match === '\\\\' ? '\\\\\\\\' : Match);\n    })\n        .replace(CtrlCharCodePattern, function (Match) {\n        switch (Match) {\n            case '\\0': return '\\\\0';\n            case '\\b': return '\\\\b';\n            case '\\f': return '\\\\f';\n            case '\\n': return '\\\\n';\n            case '\\r': return '\\\\r';\n            case '\\t': return '\\\\t';\n            case '\\v': return '\\\\v';\n            default: {\n                var HexCode = Match.charCodeAt(0).toString(16);\n                return '\\\\x' + '00'.slice(HexCode.length) + HexCode;\n            }\n        }\n    });\n}\n/**** quotable - makes a given string ready to be put in single/double quotes ****/\nfunction quotable(Text, Quote) {\n    if (Quote === void 0) { Quote = '\"'; }\n    var EscSeqOrSglQuotePattern = /\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}|\\\\[0bfnrtv'\"\\\\\\/]?|'/g;\n    var EscSeqOrDblQuotePattern = /\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}|\\\\[0bfnrtv'\"\\\\\\/]?|\"/g;\n    var CtrlCharCodePattern = /[\\x00-\\x1f\\x7f-\\x9f]/g;\n    return Text\n        .replace(Quote === \"'\" ? EscSeqOrSglQuotePattern : EscSeqOrDblQuotePattern, function (Match) {\n        switch (Match) {\n            case \"'\": return \"\\\\'\";\n            case '\"': return '\\\\\"';\n            case '\\\\': return '\\\\\\\\';\n            default: return Match;\n        }\n    })\n        .replace(CtrlCharCodePattern, function (Match) {\n        switch (Match) {\n            case '\\0': return '\\\\0';\n            case '\\b': return '\\\\b';\n            case '\\f': return '\\\\f';\n            case '\\n': return '\\\\n';\n            case '\\r': return '\\\\r';\n            case '\\t': return '\\\\t';\n            case '\\v': return '\\\\v';\n            default: {\n                var HexCode = Match.charCodeAt(0).toString(16);\n                return '\\\\x' + '00'.slice(HexCode.length) + HexCode;\n            }\n        }\n    });\n}\n/**** quoted ****/\nfunction quoted(Text, Quote) {\n    if (Quote === void 0) { Quote = '\"'; }\n    return Quote + quotable(Text, Quote) + Quote;\n}\n\n//----------------------------------------------------------------------------//\n/**** VoltCloud-specific types and constants ****/\nvar ApplicationNamePattern = /^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$/; // dto.\nvar maxApplicationNameLength = 63; // see discussion forum\nvar maxEMailAddressLength = 255; // dto.\nvar maxNamePartLength = 255; // dto.\nvar maxStorageKeyLength = 255; // as mentioned in REST API docs\nvar maxStorageValueLength = 1048574; // see discussion forum\n/**** internal constants and variables ****/\nvar Timeout = 30 * 1000; // request timeout given in ms\nvar activeDeveloperId;\nvar activeDeveloperAddress;\nvar activeDeveloperPassword; // stored for token refresh\nvar activeCustomerId;\nvar activeCustomerAddress;\nvar activeCustomerPassword; // stored for token refresh\nvar activeAccessToken;\nvar currentApplicationId;\nvar currentApplicationURL;\nvar currentCustomerId;\n/**** focusOnApplication - async for for the sake of systematics only ****/\nfunction focusOnApplication(ApplicationURL, ApplicationId) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            expectURL('VoltCloud application url', ApplicationURL);\n            expectNonEmptyString('VoltCloud application id', ApplicationId);\n            currentApplicationURL = ApplicationURL;\n            currentApplicationId = ApplicationId;\n            return [2 /*return*/];\n        });\n    });\n}\n/**** actOnBehalfOfDeveloper ****/\nfunction actOnBehalfOfDeveloper(EMailAddress, Password) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectEMailAddress('VoltCloud developer email address', EMailAddress);\n                    expectPassword('VoltCloud developer password', Password);\n                    assertApplicationFocus();\n                    return [4 /*yield*/, loginDeveloper(EMailAddress, Password)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** actOnBehalfOfCustomer ****/\nfunction actOnBehalfOfCustomer(EMailAddress, Password) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectEMailAddress('VoltCloud customer email address', EMailAddress);\n                    expectPassword('VoltCloud customer password', Password);\n                    assertApplicationFocus();\n                    return [4 /*yield*/, loginCustomer(EMailAddress, Password)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** ApplicationStorage ****/\nfunction ApplicationStorage() {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'GET', '{{application_url}}/api/storage/{{application_id}}')];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_1 = _a.sent();\n                    switch (Signal_1.HTTPStatus) {\n                        case 404:\n                            switch (Signal_1.message) {\n                                case 'Could not route your request.':\n                                case 'App not found.':\n                                    throwError('NoSuchApplication: could not find the given application');\n                            }\n                            break;\n                        case 422: switch (Signal_1.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid application id given');\n                        }\n                        default: throw Signal_1;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/, Response || {}];\n            }\n        });\n    });\n}\n/**** ApplicationStorageEntry ****/\nfunction ApplicationStorageEntry(StorageKey) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectStorageKey('VoltCloud application storage key', StorageKey);\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'GET', '{{application_url}}/api/storage/{{application_id}}/key/{{application_storage_key}}', {\n                            application_storage_key: StorageKey\n                        })];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_2 = _a.sent();\n                    switch (Signal_2.HTTPStatus) {\n                        case 404:\n                            switch (Signal_2.message) {\n                                case 'Could not route your request.':\n                                    throwError('NoSuchApplication: could not find the given application or storage key');\n                                case 'App not found.':\n                                    throwError('NoSuchApplication: could not find the given application');\n                                case 'Key does not exist.':\n                                    return [2 /*return*/, undefined];\n                            }\n                            break;\n                        case 422: switch (Signal_2.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid application id given');\n                            case 'The length of the key parameter must be <=255.':\n                                throwError('InvalidArgument: the given storage key is too long');\n                        }\n                        default: throw Signal_2;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/, Response];\n            }\n        });\n    });\n}\n/**** focusOnCustomer - async for for the sake of systematics only ****/\nfunction focusOnCustomer(CustomerId) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            expectNonEmptyString('VoltCloud customer id', CustomerId);\n            assertDeveloperMandate();\n            assertApplicationFocus();\n            currentCustomerId = CustomerId; // no more validations possible right now\n            return [2 /*return*/];\n        });\n    });\n}\n/**** focusOnNewCustomer ****/\nfunction focusOnNewCustomer(EMailAddress, Password) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_3;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectEMailAddress('VoltCloud customer email address', EMailAddress);\n                    expectPassword('VoltCloud customer password', Password);\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/register', null, {\n                            email: EMailAddress,\n                            password: Password,\n                            confirmation: Password,\n                            scope: currentApplicationId\n                        })];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_3 = _a.sent();\n                    switch (Signal_3.HTTPStatus) {\n                        case 404:\n                            switch (Signal_3.message) {\n                                case 'Could not route your request.':\n                                case 'App not found.':\n                                    throwError('NoSuchApplication: could not find the given application');\n                            }\n                            break;\n                        case 422: switch (Signal_3.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid application id given');\n                        }\n                        default: throw Signal_3;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) && ValueIsString(Response.id)) {\n                        currentCustomerId = Response.id;\n                    }\n                    else {\n                        throwError('InternalError: could not analyze response for registration request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** resendConfirmationEMailToCustomer ****/\nfunction resendConfirmationEMailToCustomer(EMailAddress) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_4;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectEMailAddress('VoltCloud customer email address', EMailAddress);\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/resend', null, {\n                            email: EMailAddress,\n                            scope: currentApplicationId\n                        })];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_4 = _a.sent();\n                    switch (Signal_4.HTTPStatus) {\n                        case 422: switch (Signal_4.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid application id given');\n                        }\n                        default: throw Signal_4;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** confirmCustomerUsing ****/\nfunction confirmCustomerUsing(Token) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_5;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectNonEmptyString('VoltCloud customer confirmation token', Token);\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/confirm', null, {\n                            token: Token\n                        })];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_5 = _a.sent();\n                    switch (Signal_5.HTTPStatus) {\n                        case 401: throwError('BadToken: the given token can not be recognized');\n                        default: throw Signal_5;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** startPasswordResetForCustomer ****/\nfunction startPasswordResetForCustomer(EMailAddress) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_6;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectEMailAddress('VoltCloud customer email address', EMailAddress);\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/forgot', null, {\n                            email: EMailAddress,\n                            scope: currentApplicationId\n                        })];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_6 = _a.sent();\n                    switch (Signal_6.HTTPStatus) {\n                        case 422: switch (Signal_6.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid application id given');\n                        }\n                        default: throw Signal_6;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** resetCustomerPasswordUsing ****/\nfunction resetCustomerPasswordUsing(Token, Password) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_7;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectNonEmptyString('VoltCloud password reset token', Token);\n                    expectPassword('VoltCloud customer password', Password);\n                    assertApplicationFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/reset', null, {\n                            token: Token,\n                            password: Password,\n                            confirmation: Password\n                        })];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_7 = _a.sent();\n                    switch (Signal_7.HTTPStatus) {\n                        case 401: throwError('BadToken: the given token can not be recognized');\n                        default: throw Signal_7;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** CustomerRecord ****/\nfunction CustomerRecord() {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_8;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    assertApplicationFocus();\n                    assertCustomerMandate();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'GET', '{{application_url}}/api/user/{{customer_id}}', {\n                            customer_id: activeCustomerId\n                        })];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_8 = _a.sent();\n                    switch (Signal_8.HTTPStatus) {\n                        case 422: switch (Signal_8.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                        }\n                        default: throw Signal_8;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) && (Response.id === activeCustomerId)) {\n                        if (currentCustomerId === activeCustomerId) {\n                            activeCustomerAddress = Response.email; // might have changed\n                        }\n                        return [2 /*return*/, Response];\n                    }\n                    else {\n                        throwError('InternalError: could not analyze response for customer record request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** changeCustomerEMailAddressTo ****/\nfunction changeCustomerEMailAddressTo(EMailAddress) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_9;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectEMailAddress('VoltCloud customer email address', EMailAddress);\n                    assertCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'PUT', '{{application_url}}/api/user/{{customer_id}}', null, {\n                            email: EMailAddress\n                        })];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_9 = _a.sent();\n                    switch (Signal_9.HTTPStatus) {\n                        case 404: throwError('NoSuchUser: the given customer does not exist');\n                        case 409: throwError('UserExists: the given EMail address is already in use');\n                        case 422: switch (Signal_9.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                        }\n                        default: throw Signal_9;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) && (Response.id === currentCustomerId)) {\n                        if (currentCustomerId === activeCustomerId) {\n                            activeCustomerAddress = Response.email; // might have changed\n                        }\n                    }\n                    else {\n                        throwError('InternalError: could not analyze response for registration request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** changeCustomerPasswordTo ****/\nfunction changeCustomerPasswordTo(Password) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_10;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectPassword('VoltCloud customer password', Password);\n                    assertCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'PUT', '{{application_url}}/api/user/{{customer_id}}', null, {\n                            password: {\n                                old: activeCustomerPassword,\n                                new: Password,\n                                confirmation: Password\n                            }\n                        })];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_10 = _a.sent();\n                    switch (Signal_10.HTTPStatus) {\n                        case 403: throwError('ForbiddenOperation: wrong current password given');\n                        case 404: throwError('NoSuchUser: the given customer does not exist');\n                        case 422: switch (Signal_10.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                        }\n                        default: throw Signal_10;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) && (Response.id === currentCustomerId)) {\n                        if (currentCustomerId === activeCustomerId) {\n                            activeCustomerPassword = Password;\n                        }\n                    }\n                    else {\n                        throwError('InternalError: could not analyze response for registration request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** updateCustomerRecordBy ****/\nfunction updateCustomerRecordBy(Settings) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_11;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectPlainObject('VoltCloud customer settings', Settings);\n                    assertCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'PUT', '{{application_url}}/api/user/{{customer_id}}', null, Settings)];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_11 = _a.sent();\n                    switch (Signal_11.HTTPStatus) {\n                        case 403: throwError('ForbiddenOperation: wrong current password given');\n                        case 404: throwError('NoSuchUser: the given customer does not exist');\n                        case 409: throwError('UserExists: the given EMail address is already in use');\n                        case 422: switch (Signal_11.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                        }\n                        default: throw Signal_11;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) && (Response.id === currentCustomerId)) {\n                        if (currentCustomerId === activeCustomerId) {\n                            activeCustomerAddress = Response.email; // might have changed\n                            if (Settings.password != null) {\n                                activeCustomerPassword = Settings.password.new;\n                            }\n                        }\n                    }\n                    else {\n                        throwError('InternalError: could not analyze response for registration request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** deleteCustomer ****/\nfunction deleteCustomer() {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_12;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'DELETE', '{{application_url}}/api/user/{{customer_id}}')];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_12 = _a.sent();\n                    switch (Signal_12.HTTPStatus) {\n                        case 404:\n                            switch (Signal_12.message) {\n                                case 'User not found.': return [2 /*return*/];\n                            }\n                            break;\n                        case 422: switch (Signal_12.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid user id given');\n                        }\n                        default: throw Signal_12;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** CustomerStorage ****/\nfunction CustomerStorage() {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_13;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'GET', '{{application_url}}/api/storage/{{customer_id}}')];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_13 = _a.sent();\n                    switch (Signal_13.HTTPStatus) {\n                        case 404:\n                            switch (Signal_13.message) {\n                                case 'Could not route your request.':\n                                case 'User not found.':\n                                    throwError('NoSuchCustomer: could not find the given customer');\n                            }\n                            break;\n                        case 422: switch (Signal_13.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                        }\n                        default: throw Signal_13;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/, Response || {}];\n            }\n        });\n    });\n}\n/**** CustomerStorageEntry ****/\nfunction CustomerStorageEntry(StorageKey) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_14;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectStorageKey('VoltCloud customer storage key', StorageKey);\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'GET', '{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}', {\n                            customer_storage_key: StorageKey\n                        })];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_14 = _a.sent();\n                    switch (Signal_14.HTTPStatus) {\n                        case 404:\n                            switch (Signal_14.message) {\n                                case 'Could not route your request.':\n                                    throwError('NoSuchCustomer: could not find the given customer or storage key');\n                                case 'User not found.':\n                                    throwError('NoSuchCustomer: could not find the given customer');\n                                case 'Key does not exist.':\n                                    return [2 /*return*/, undefined];\n                            }\n                            break;\n                        case 422: switch (Signal_14.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                            case 'The length of the key parameter must be <=255.':\n                                throwError('InvalidArgument: the given storage key is too long');\n                        }\n                        default: throw Signal_14;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/, Response];\n            }\n        });\n    });\n}\n/**** setCustomerStorageEntryTo ****/\nfunction setCustomerStorageEntryTo(StorageKey, StorageValue) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_15;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectStorageKey('VoltCloud customer storage key', StorageKey);\n                    expectStorageValue('VoltCloud customer storage value', StorageValue);\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'PUT', '{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}', {\n                            customer_storage_key: StorageKey\n                        }, StorageValue)];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_15 = _a.sent();\n                    switch (Signal_15.HTTPStatus) {\n                        case 404:\n                            switch (Signal_15.message) {\n                                case 'Could not route your request.':\n                                case 'User not found.':\n                                    throwError('NoSuchCustomer: could not find the given customer');\n                            }\n                            break;\n                        case 413: throwError('InvalidArgument: the given storage value is too long');\n                        case 422: switch (Signal_15.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                            case 'The length of the key parameter must be <=255.':\n                                throwError('InvalidArgument: the given storage key is too long');\n                        }\n                        default: throw Signal_15;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** deleteCustomerStorageEntry ****/\nfunction deleteCustomerStorageEntry(StorageKey) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_16;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    expectStorageKey('VoltCloud customer storage key', StorageKey);\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'DELETE', '{{application_url}}/api/storage/{{customer_id}}/key/{{customer_storage_key}}', {\n                            customer_storage_key: StorageKey\n                        })];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_16 = _a.sent();\n                    switch (Signal_16.HTTPStatus) {\n                        case 404:\n                            switch (Signal_16.message) {\n                                case 'Could not route your request.':\n                                case 'User not found.':\n                                    throwError('NoSuchCustomer: could not find the given customer');\n                            }\n                            break;\n                        case 422: switch (Signal_16.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                            case 'The length of the key parameter must be <=255.':\n                                throwError('InvalidArgument: the given storage key is too long');\n                        }\n                        default: throw Signal_16;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** clearCustomerStorage ****/\nfunction clearCustomerStorage() {\n    return __awaiter(this, void 0, void 0, function () {\n        var Signal_17;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    assertDeveloperOrCustomerMandate();\n                    assertApplicationFocus();\n                    assertCustomerFocus();\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, ResponseOf('private', 'DELETE', '{{application_url}}/api/storage/{{customer_id}}')];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_17 = _a.sent();\n                    switch (Signal_17.HTTPStatus) {\n                        case 404:\n                            switch (Signal_17.message) {\n                                case 'Could not route your request.':\n                                case 'User not found.':\n                                    throwError('NoSuchCustomer: could not find the given customer');\n                            }\n                            break;\n                        case 422: switch (Signal_17.message) {\n                            case 'Could not decode scope.':\n                                throwError('InvalidArgument: invalid customer id given');\n                        }\n                        default: throw Signal_17;\n                    }\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** ValueIsPassword - a string following VoltCloud's password rules ****/\nfunction ValueIsPassword(Value) {\n    return (ValueIsString(Value) && (Value.length >= 8) &&\n        /[0-9]/.test(Value) && (Value.toLowerCase() !== Value));\n}\n/**** allow/expect[ed]Password ****/\nvar allowPassword = ValidatorForClassifier(ValueIsPassword, acceptNil, 'valid VoltCloud password'), allowedPassword = allowPassword;\nvar expectPassword = ValidatorForClassifier(ValueIsPassword, rejectNil, 'valid VoltCloud password'), expectedPassword = expectPassword;\n/**** ValueIsApplicationName - a string suitable as a VoltCloud application name ****/\nfunction ValueIsApplicationName(Value) {\n    return (ValueIsString(Value) &&\n        (Value.length >= 1) && (Value.length <= maxApplicationNameLength) &&\n        ApplicationNamePattern.test(Value));\n}\n/**** allow/expect[ed]ApplicationName ****/\nvar allowApplicationName = ValidatorForClassifier(ValueIsApplicationName, acceptNil, 'valid VoltCloud application name'), allowedApplicationName = allowApplicationName;\nvar expectApplicationName = ValidatorForClassifier(ValueIsApplicationName, rejectNil, 'valid VoltCloud application name'), expectedApplicationName = expectApplicationName;\n/**** ValueIsStorageKey - a string suitable as a VoltCloud storage key ****/\nfunction ValueIsStorageKey(Value) {\n    return ValueIsNonEmptyString(Value) && (Value.length <= maxStorageKeyLength);\n}\n/**** allow/expect[ed]StorageKey ****/\nvar allowStorageKey = ValidatorForClassifier(ValueIsStorageKey, acceptNil, 'suitable VoltCloud storage key'), allowedStorageKey = allowStorageKey;\nvar expectStorageKey = ValidatorForClassifier(ValueIsStorageKey, rejectNil, 'suitable VoltCloud storage key'), expectedStorageKey = expectStorageKey;\n/**** ValueIsStorageValue - a string suitable as a VoltCloud storage value ****/\nfunction ValueIsStorageValue(Value) {\n    return ValueIsString(Value) && (Value.length <= maxStorageValueLength);\n}\n/**** allow/expect[ed]StorageValue ****/\nvar allowStorageValue = ValidatorForClassifier(ValueIsStorageValue, acceptNil, 'suitable VoltCloud storage value'), allowedStorageValue = allowStorageValue;\nvar expectStorageValue = ValidatorForClassifier(ValueIsStorageValue, rejectNil, 'suitable VoltCloud storage value'), expectedStorageValue = expectStorageValue;\n/**** assertDeveloperMandate ****/\nfunction assertDeveloperMandate() {\n    if (activeDeveloperId == null)\n        throwError('InvalidState: please mandate a specific VoltCloud developer first');\n}\n/**** assertCustomerMandate ****/\nfunction assertCustomerMandate() {\n    if (activeCustomerId == null)\n        throwError('InvalidState: please mandate a specific VoltCloud customer first');\n}\n/**** assertDeveloperOrCustomerMandate ****/\nfunction assertDeveloperOrCustomerMandate() {\n    if ((activeDeveloperId == null) && (activeCustomerId == null))\n        throwError('InvalidState: please mandate a specific VoltCloud developer or customer first');\n}\n/**** assertApplicationFocus ****/\nfunction assertApplicationFocus() {\n    if (currentApplicationURL == null)\n        throwError('InvalidState: please focus on a specific VoltCloud application first');\n}\n/**** assertCustomerFocus ****/\nfunction assertCustomerFocus() {\n    if (currentCustomerId == null)\n        throwError('InvalidState: please focus on a specific VoltCloud application customer first');\n}\n/**** loginDeveloper ****/\nfunction loginDeveloper(EMailAddress, Password, firstAttempt) {\n    if (firstAttempt === void 0) { firstAttempt = true; }\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_18;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    activeDeveloperId = undefined; // avoid re-try after failure\n                    activeDeveloperAddress = undefined; // dto.\n                    activeDeveloperPassword = undefined; // dto.\n                    activeCustomerId = undefined; // clear customer mandate\n                    activeCustomerAddress = undefined; // dto.\n                    activeCustomerPassword = undefined; // dto.\n                    activeAccessToken = undefined;\n                    currentCustomerId = undefined; // unfocus any customer\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    activeDeveloperAddress = EMailAddress; // needed in case of login failure\n                    activeDeveloperPassword = Password;\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/login', null, {\n                            grant_type: 'password',\n                            username: EMailAddress,\n                            password: Password,\n                            scope: 'RpYCMN'\n                        }, firstAttempt)];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_18 = _a.sent();\n                    switch (Signal_18.HTTPStatus) {\n                        case 401: throwError('LoginFailed: developer could not be logged in');\n                        default: throw Signal_18;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) &&\n                        (Response.token_type === 'bearer') && ValueIsString(Response.access_token) &&\n                        ValueIsString(Response.user_id)) {\n                        activeDeveloperId = Response.user_id;\n                        activeAccessToken = Response.access_token;\n                    }\n                    else {\n                        activeDeveloperAddress = undefined;\n                        activeDeveloperPassword = undefined;\n                        throwError('InternalError: could not analyze response for login request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** loginCustomer ****/\nfunction loginCustomer(EMailAddress, Password, firstAttempt) {\n    if (firstAttempt === void 0) { firstAttempt = true; }\n    return __awaiter(this, void 0, void 0, function () {\n        var Response, Signal_19;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    activeCustomerId = undefined; // avoid re-try after failure\n                    activeCustomerAddress = undefined; // dto.\n                    activeCustomerPassword = undefined; // dto.\n                    activeDeveloperId = undefined; // clear developer mandate\n                    activeDeveloperAddress = undefined; // dto.\n                    activeDeveloperPassword = undefined; // dto.\n                    activeAccessToken = undefined;\n                    currentCustomerId = undefined; // unfocus any customer\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    activeCustomerAddress = EMailAddress; // needed in case of login failure\n                    activeCustomerPassword = Password;\n                    return [4 /*yield*/, ResponseOf('public', 'POST', '{{application_url}}/api/auth/login', null, {\n                            grant_type: 'password',\n                            username: EMailAddress,\n                            password: Password,\n                            scope: currentApplicationId\n                        }, firstAttempt)];\n                case 2:\n                    Response = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    Signal_19 = _a.sent();\n                    switch (Signal_19.HTTPStatus) {\n                        case 401: throwError('LoginFailed: customer could not be logged in');\n                        default: throw Signal_19;\n                    }\n                    return [3 /*break*/, 4];\n                case 4:\n                    if ((Response != null) &&\n                        (Response.token_type === 'bearer') && ValueIsString(Response.access_token) &&\n                        ValueIsString(Response.user_id)) {\n                        activeCustomerId = Response.user_id;\n                        activeAccessToken = Response.access_token;\n                        currentCustomerId = Response.user_id; // auto-focus logged-in customer\n                    }\n                    else {\n                        activeCustomerAddress = undefined;\n                        activeCustomerPassword = undefined;\n                        throwError('InternalError: could not analyze response for login request');\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/**** ResponseOf ****/\nfunction ResponseOf(Mode, Method, URL, Parameters, Data, firstAttempt) {\n    if (firstAttempt === void 0) { firstAttempt = true; }\n    return __awaiter(this, void 0, void 0, function () {\n        var fullParameters, resolvedURL;\n        return __generator(this, function (_a) {\n            fullParameters = Object.assign({}, {\n                application_id: currentApplicationId,\n                application_url: currentApplicationURL,\n                customer_id: currentCustomerId,\n            }, Parameters || {});\n            resolvedURL = resolved(URL, fullParameters);\n            if (Method === 'GET') {\n                resolvedURL += ((resolvedURL.indexOf('?') < 0 ? '?' : '&') +\n                    '_=' + Date.now());\n            }\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var Request = new XMLHttpRequest();\n                    Request.open(Method, resolvedURL, true);\n                    if (Mode === 'private') {\n                        Request.withCredentials = true;\n                        Request.setRequestHeader('authorization', 'Bearer ' + activeAccessToken);\n                    }\n                    Request.timeout = Timeout;\n                    Request.addEventListener('timeout', function () {\n                        reject(namedError('RequestTimedout: VoltCloud request timed out'));\n                    });\n                    Request.addEventListener('abort', function () {\n                        reject(namedError('RequestAborted: VoltCloud request has been aborted'));\n                    });\n                    function handleError() {\n                        return __awaiter(this, void 0, void 0, function () {\n                            var ContentType, ErrorDetails;\n                            return __generator(this, function (_a) {\n                                if (Request.status === 401) {\n                                    if (firstAttempt && (Mode !== 'public')) { // try to \"refresh\" the access token\n                                        return [2 /*return*/, (activeDeveloperAddress != null // also catches login failures\n                                                ? loginDeveloper(activeDeveloperAddress, activeDeveloperPassword, false)\n                                                : loginCustomer(activeCustomerAddress, activeCustomerPassword, false))\n                                                .then(function () {\n                                                ResponseOf(Mode, Method, URL, Parameters, Data, false)\n                                                    .then(function (Result) { return resolve(Result); })\n                                                    .catch(function (Signal) { return reject(Signal); });\n                                            })\n                                                .catch(function (Signal) { return reject(Signal); })];\n                                    }\n                                    else {\n                                        return [2 /*return*/, reject(namedError('AuthorizationFailure: VoltCloud request could not be authorized', { HTTPStatus: Request.status }))];\n                                    }\n                                }\n                                ContentType = Request.getResponseHeader('content-type') || '';\n                                if (ContentType.startsWith('application/json')) {\n                                    try { // if given, try to use a VoltCloud error message\n                                        ErrorDetails = JSON.parse(Request.responseText);\n                                        if (ValueIsNonEmptyString(ErrorDetails.type) &&\n                                            ValueIsNonEmptyString(ErrorDetails.message)) {\n                                            if ((Request.status === 422) &&\n                                                (ErrorDetails.type === 'ValidationError') &&\n                                                (ErrorDetails.validations != null)) {\n                                                return [2 /*return*/, reject(ValidationError(ErrorDetails))];\n                                            }\n                                            else {\n                                                return [2 /*return*/, reject(namedError(ErrorDetails.type + ': ' + ErrorDetails.message, {\n                                                        HTTPStatus: Request.status, HTTPResponse: Request.responseText\n                                                    }))];\n                                            }\n                                        }\n                                    }\n                                    catch (Signal) { /* otherwise create a generic error message */ }\n                                }\n                                return [2 /*return*/, reject(namedError('RequestFailed: VoltCloud request failed', {\n                                        HTTPStatus: Request.status, HTTPResponse: Request.responseText\n                                    }))];\n                            });\n                        });\n                    }\n                    Request.addEventListener('error', handleError);\n                    function handleSuccess() {\n                        return __awaiter(this, void 0, void 0, function () {\n                            var StatusCode, ContentType;\n                            return __generator(this, function (_a) {\n                                StatusCode = Request.status;\n                                ContentType = Request.getResponseHeader('content-type') || '';\n                                if (StatusCode === 204) {\n                                    return [2 /*return*/, resolve(undefined)];\n                                }\n                                else {\n                                    switch (true) {\n                                        case ContentType.startsWith('application/json'):\n                                            return [2 /*return*/, resolve(JSON.parse(Request.responseText))];\n                                        case (StatusCode === 201): // often with content-type \"text/plain\"\n                                            return [2 /*return*/, resolve(undefined)];\n                                        default:\n                                            return [2 /*return*/, reject(namedError('RequestFailed: unexpected response content type ' +\n                                                    quoted(ContentType || '(missing)'), {\n                                                    ContentType: ContentType,\n                                                    HTTPResponse: Request.responseText\n                                                }))];\n                                    }\n                                }\n                            });\n                        });\n                    }\n                    Request.addEventListener('load', function () {\n                        if ((Request.status < 200) || (Request.status >= 300)) {\n                            handleError();\n                        }\n                        else {\n                            handleSuccess();\n                        }\n                    });\n                    if (Data == null) {\n                        Request.send(null);\n                    }\n                    else {\n                        if (Data instanceof Blob) {\n                            var RequestBody = new FormData();\n                            RequestBody.append('index.zip', Data);\n                            Request.send(RequestBody);\n                        }\n                        else {\n                            Request.setRequestHeader('Content-Type', 'application/json');\n                            Request.send(JSON.stringify(Data));\n                        }\n                    }\n                })];\n        });\n    });\n}\n/**** resolved ****/\nvar PlaceholderPattern = /\\{\\{([a-z0-9_-]+)\\}\\}/gi;\nfunction resolved(Text, VariableSet) {\n    return Text.replace(PlaceholderPattern, function (_, VariableName) {\n        if (VariableSet.hasOwnProperty(VariableName)) {\n            return VariableSet[VariableName];\n        }\n        else {\n            throwError('VariableNotFound: the given placeholder text refers to an ' +\n                'undefined variable called ' + quoted(VariableName));\n        }\n    });\n}\n/**** namedError ****/\nfunction namedError(Message, Details) {\n    var Result;\n    var Match = /^([$a-zA-Z][$a-zA-Z0-9]*):\\s*(\\S.+)\\s*$/.exec(Message);\n    if (Match == null) {\n        Result = new Error(Message);\n    }\n    else {\n        Result = new Error(Match[2]);\n        Result.name = Match[1];\n    }\n    if (Details != null) {\n        Object.assign(Result, Details); // not fool-proof!\n    }\n    return Result;\n}\n/**** ValidationError ****/\nfunction ValidationError(Details) {\n    function named422Error(Message) {\n        return namedError(Message, { HTTPStatus: 422 });\n    }\n    if (ValueIsArray(Details.validations.body) &&\n        (Details.validations.body[0] != null)) {\n        var firstMessage = Details.validations.body[0].messages[0];\n        switch (true) {\n            case firstMessage.contains('email'):\n                switch (Details.validations.body[0].property) {\n                    case 'request.body.username':\n                    case 'request.body.email': return named422Error('InvalidArgument: invalid EMail address given');\n                }\n                break;\n            case firstMessage.contains('^([a-z0-9]|[a-z0-9][-a-z0-9]*[a-z0-9])$'):\n                switch (Details.validations.body[0].property) {\n                    case 'request.body.subdomain': return named422Error('InvalidArgument: invalid application name given');\n                }\n                break;\n            case firstMessage.contains('does not meet minimum length of 1'):\n                switch (Details.validations.body[0].property) {\n                    case 'request.body.subdomain': return named422Error('MissingArgument: no application name given');\n                    case 'request.body.confirmation_url': return named422Error('MissingArgument: no Customer Confirmation URL given');\n                    case 'request.body.reset_url': return named422Error('MissingArgument: no Password Reset URL given');\n                }\n                break;\n            case firstMessage.contains('does not meet maximum length of 63'):\n                switch (Details.validations.body[0].property) {\n                    case 'request.body.subdomain': return named422Error('InvalidArgument: the given application name is too long');\n                    case 'request.body.confirmation_url': return named422Error('InvalidArgument: the given Customer Confirmation URL is too long');\n                    case 'request.body.reset_url': return named422Error('InvalidArgument: the given Password Reset URL is too long');\n                }\n                break;\n            case firstMessage.contains('additionalProperty'):\n                return named422Error('InvalidArgument: unsupported property given');\n            case firstMessage.contains('does not match pattern \"[a-zA-Z0-9]{6,}\"'):\n                return named422Error('InvalidArgument: invalid Application Id given');\n        }\n    }\n    if (ValueIsArray(Details.validations.password) &&\n        (Details.validations.password[0] != null)) {\n        return named422Error('InvalidArgument: ' + Details.validations.password[0]);\n    }\n    /**** fallback ****/\n    return namedError('InternalError: ' + Details.message, Details);\n}\n\nexport { ApplicationNamePattern, ApplicationStorage, ApplicationStorageEntry, CustomerRecord, CustomerStorage, CustomerStorageEntry, ValueIsApplicationName, ValueIsPassword, ValueIsStorageKey, ValueIsStorageValue, actOnBehalfOfCustomer, actOnBehalfOfDeveloper, allowApplicationName, allowPassword, allowStorageKey, allowStorageValue, allowedApplicationName, allowedPassword, allowedStorageKey, allowedStorageValue, changeCustomerEMailAddressTo, changeCustomerPasswordTo, clearCustomerStorage, confirmCustomerUsing, deleteCustomer, deleteCustomerStorageEntry, expectApplicationName, expectPassword, expectStorageKey, expectStorageValue, expectedApplicationName, expectedPassword, expectedStorageKey, expectedStorageValue, focusOnApplication, focusOnCustomer, focusOnNewCustomer, maxApplicationNameLength, maxEMailAddressLength, maxNamePartLength, maxStorageKeyLength, maxStorageValueLength, resendConfirmationEMailToCustomer, resetCustomerPasswordUsing, setCustomerStorageEntryTo, startPasswordResetForCustomer, updateCustomerRecordBy };\n//# sourceMappingURL=voltcloud-for-browsers.esm.js.map\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n\n  import {\n    focusOnApplication, actOnBehalfOfCustomer, deleteCustomer\n  } from 'voltcloud-for-browsers'\n</script>\n\n<script lang=\"ts\">\n  let StatementChecked:boolean = false\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function deleteAccount () {\n    Globals.define({ State:'unregistering' })\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await actOnBehalfOfCustomer($Globals.EMailAddress,$Globals.Password)\n      await deleteCustomer()\n    } catch (Signal) {\n      switch (Signal.name) {\n        case 'LoginFailed':\n        case 'BadToken':\n          return Globals.define({ loggedIn:false, State:'loggedOut' })\n        default:\n          return Globals.define({\n            State:'CommunicationFailure', FailureReason:Signal.toString()\n          })\n      }\n    }\n\n    Globals.define({ loggedIn:false, AccessToken:'', State:'unregistered' })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Account Deletion</div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n\n    <div class=\"Block\">\n      You are about to delete your account.\n    </div>\n\n    <div class=\"Block\">\n      This operation will also delete your notes and can not be reverted!\n    </div>\n\n    <div class=\"Block\">\n      Please check the following statement if you really want to proceed.\n    </div>\n\n    <div class=\"Block\">\n      <input type=\"checkbox\" bind:checked={StatementChecked}/>\n      I accept loosing all my data\n    </div>\n\n    <button disabled={! StatementChecked} on:click|preventDefault={deleteAccount}>Delete Account</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','Login')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Logout</div>\n\n    <div class=\"Block\">\n      You have been logged-out.\n    </div>\n\n    <div class=\"Block\">\n      If you want to continue using this application, you will have to log-in\n      again.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Name Changed</div>\n\n    <div class=\"Block\">\n      Your name has been successfully changed.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Name is being changed...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n\n  import {\n    maxNamePartLength,\n    focusOnApplication, actOnBehalfOfCustomer, updateCustomerRecordBy\n  } from 'voltcloud-for-browsers'\n</script>\n\n<script lang=\"ts\">\n  let firstName:string, firstNameLooksBad:boolean, firstNameMessage:string\n  let lastName:string,  lastNameLooksBad:boolean,  lastNameMessage:string\n\n  firstName = $Globals.firstName\n  lastName  = $Globals.lastName\n\n  $: switch (true) {\n    case (firstName.trim() === ''):\n      firstNameLooksBad = false; firstNameMessage = 'please, enter your first name'\n      break\n    case (firstName.trim().length > maxNamePartLength):\n      firstNameLooksBad = true;  firstNameMessage = 'the given name is too long'\n      break\n    default:\n      firstNameLooksBad = false; firstNameMessage = 'the given name looks acceptable'\n  }\n\n  $: switch (true) {\n    case (lastName.trim() === ''):\n      lastNameLooksBad = false; lastNameMessage = 'please, enter your last name'\n      break\n    case (lastName.trim().length > maxNamePartLength):\n      lastNameLooksBad = true;  lastNameMessage = 'the given name is too long'\n      break\n    default:\n      lastNameLooksBad = false; lastNameMessage = 'the given name looks acceptable'\n  }\n\n  $: ChangeIsForbidden = firstNameLooksBad || lastNameLooksBad\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function changeName () {\n    Globals.define({ State:'changingName' })\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await actOnBehalfOfCustomer($Globals.EMailAddress,$Globals.Password)\n      await updateCustomerRecordBy({ first_name:firstName, last_name:lastName })\n    } catch (Signal) {\n      switch (Signal.name) {\n        case 'LoginFailed':\n        case 'BadToken':\n          return Globals.define({ loggedIn:false, State:'loggedOut' })\n        default:\n          return Globals.define({\n            State:'CommunicationFailure', FailureReason:Signal.toString()\n          })\n      }\n    }\n\n    Globals.define({\n      firstName:firstName.trim(), lastName:lastName.trim(),\n      State:'NameChanged'\n    })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Name Change</div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n\n    <input type=\"text\" bind:value={firstName} placeholder=\"your first name\">\n    <div class:Hint={true} class:invalid={firstNameLooksBad}>{firstNameMessage}</div>\n\n    <input type=\"text\" bind:value={lastName} placeholder=\"your last name\">\n    <div class:Hint={true} class:invalid={lastNameLooksBad}>{lastNameMessage}</div>\n\n    <button disabled={ChangeIsForbidden} on:click|preventDefault={changeName}>Change Name</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','PasswordChange')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password Change Failed</div>\n\n    <div class=\"Block\">\n      Your password could not be changed because your current password was\n      incorrect.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password Changed</div>\n\n    <div class=\"Block\">\n      Your password has been successfully changed any your notes re-encrypted.\n    </div>\n\n    <div class=\"Block\">\n      Important: please close all other currently running instances of this\n      application (on every device and browser) or those instances could\n      damage your data!\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password is being changed...</div>\n  </div>\n</div>\n","\"use strict\";\n// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Package base64 implements Base64 encoding and decoding.\n */\n// Invalid character used in decoding to indicate\n// that the character to decode is out of range of\n// alphabet and cannot be decoded.\nvar INVALID_BYTE = 256;\n/**\n * Implements standard Base64 encoding.\n *\n * Operates in constant time.\n */\nvar Coder = /** @class */ (function () {\n    // TODO(dchest): methods to encode chunk-by-chunk.\n    function Coder(_paddingCharacter) {\n        if (_paddingCharacter === void 0) { _paddingCharacter = \"=\"; }\n        this._paddingCharacter = _paddingCharacter;\n    }\n    Coder.prototype.encodedLength = function (length) {\n        if (!this._paddingCharacter) {\n            return (length * 8 + 5) / 6 | 0;\n        }\n        return (length + 2) / 3 * 4 | 0;\n    };\n    Coder.prototype.encode = function (data) {\n        var out = \"\";\n        var i = 0;\n        for (; i < data.length - 2; i += 3) {\n            var c = (data[i] << 16) | (data[i + 1] << 8) | (data[i + 2]);\n            out += this._encodeByte((c >>> 3 * 6) & 63);\n            out += this._encodeByte((c >>> 2 * 6) & 63);\n            out += this._encodeByte((c >>> 1 * 6) & 63);\n            out += this._encodeByte((c >>> 0 * 6) & 63);\n        }\n        var left = data.length - i;\n        if (left > 0) {\n            var c = (data[i] << 16) | (left === 2 ? data[i + 1] << 8 : 0);\n            out += this._encodeByte((c >>> 3 * 6) & 63);\n            out += this._encodeByte((c >>> 2 * 6) & 63);\n            if (left === 2) {\n                out += this._encodeByte((c >>> 1 * 6) & 63);\n            }\n            else {\n                out += this._paddingCharacter || \"\";\n            }\n            out += this._paddingCharacter || \"\";\n        }\n        return out;\n    };\n    Coder.prototype.maxDecodedLength = function (length) {\n        if (!this._paddingCharacter) {\n            return (length * 6 + 7) / 8 | 0;\n        }\n        return length / 4 * 3 | 0;\n    };\n    Coder.prototype.decodedLength = function (s) {\n        return this.maxDecodedLength(s.length - this._getPaddingLength(s));\n    };\n    Coder.prototype.decode = function (s) {\n        if (s.length === 0) {\n            return new Uint8Array(0);\n        }\n        var paddingLength = this._getPaddingLength(s);\n        var length = s.length - paddingLength;\n        var out = new Uint8Array(this.maxDecodedLength(length));\n        var op = 0;\n        var i = 0;\n        var haveBad = 0;\n        var v0 = 0, v1 = 0, v2 = 0, v3 = 0;\n        for (; i < length - 4; i += 4) {\n            v0 = this._decodeChar(s.charCodeAt(i + 0));\n            v1 = this._decodeChar(s.charCodeAt(i + 1));\n            v2 = this._decodeChar(s.charCodeAt(i + 2));\n            v3 = this._decodeChar(s.charCodeAt(i + 3));\n            out[op++] = (v0 << 2) | (v1 >>> 4);\n            out[op++] = (v1 << 4) | (v2 >>> 2);\n            out[op++] = (v2 << 6) | v3;\n            haveBad |= v0 & INVALID_BYTE;\n            haveBad |= v1 & INVALID_BYTE;\n            haveBad |= v2 & INVALID_BYTE;\n            haveBad |= v3 & INVALID_BYTE;\n        }\n        if (i < length - 1) {\n            v0 = this._decodeChar(s.charCodeAt(i));\n            v1 = this._decodeChar(s.charCodeAt(i + 1));\n            out[op++] = (v0 << 2) | (v1 >>> 4);\n            haveBad |= v0 & INVALID_BYTE;\n            haveBad |= v1 & INVALID_BYTE;\n        }\n        if (i < length - 2) {\n            v2 = this._decodeChar(s.charCodeAt(i + 2));\n            out[op++] = (v1 << 4) | (v2 >>> 2);\n            haveBad |= v2 & INVALID_BYTE;\n        }\n        if (i < length - 3) {\n            v3 = this._decodeChar(s.charCodeAt(i + 3));\n            out[op++] = (v2 << 6) | v3;\n            haveBad |= v3 & INVALID_BYTE;\n        }\n        if (haveBad !== 0) {\n            throw new Error(\"Base64Coder: incorrect characters for decoding\");\n        }\n        return out;\n    };\n    // Standard encoding have the following encoded/decoded ranges,\n    // which we need to convert between.\n    //\n    // ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789  +   /\n    // Index:   0 - 25                    26 - 51              52 - 61   62  63\n    // ASCII:  65 - 90                    97 - 122             48 - 57   43  47\n    //\n    // Encode 6 bits in b into a new character.\n    Coder.prototype._encodeByte = function (b) {\n        // Encoding uses constant time operations as follows:\n        //\n        // 1. Define comparison of A with B using (A - B) >>> 8:\n        //          if A > B, then result is positive integer\n        //          if A <= B, then result is 0\n        //\n        // 2. Define selection of C or 0 using bitwise AND: X & C:\n        //          if X == 0, then result is 0\n        //          if X != 0, then result is C\n        //\n        // 3. Start with the smallest comparison (b >= 0), which is always\n        //    true, so set the result to the starting ASCII value (65).\n        //\n        // 4. Continue comparing b to higher ASCII values, and selecting\n        //    zero if comparison isn't true, otherwise selecting a value\n        //    to add to result, which:\n        //\n        //          a) undoes the previous addition\n        //          b) provides new value to add\n        //\n        var result = b;\n        // b >= 0\n        result += 65;\n        // b > 25\n        result += ((25 - b) >>> 8) & ((0 - 65) - 26 + 97);\n        // b > 51\n        result += ((51 - b) >>> 8) & ((26 - 97) - 52 + 48);\n        // b > 61\n        result += ((61 - b) >>> 8) & ((52 - 48) - 62 + 43);\n        // b > 62\n        result += ((62 - b) >>> 8) & ((62 - 43) - 63 + 47);\n        return String.fromCharCode(result);\n    };\n    // Decode a character code into a byte.\n    // Must return 256 if character is out of alphabet range.\n    Coder.prototype._decodeChar = function (c) {\n        // Decoding works similar to encoding: using the same comparison\n        // function, but now it works on ranges: result is always incremented\n        // by value, but this value becomes zero if the range is not\n        // satisfied.\n        //\n        // Decoding starts with invalid value, 256, which is then\n        // subtracted when the range is satisfied. If none of the ranges\n        // apply, the function returns 256, which is then checked by\n        // the caller to throw error.\n        var result = INVALID_BYTE; // start with invalid character\n        // c == 43 (c > 42 and c < 44)\n        result += (((42 - c) & (c - 44)) >>> 8) & (-INVALID_BYTE + c - 43 + 62);\n        // c == 47 (c > 46 and c < 48)\n        result += (((46 - c) & (c - 48)) >>> 8) & (-INVALID_BYTE + c - 47 + 63);\n        // c > 47 and c < 58\n        result += (((47 - c) & (c - 58)) >>> 8) & (-INVALID_BYTE + c - 48 + 52);\n        // c > 64 and c < 91\n        result += (((64 - c) & (c - 91)) >>> 8) & (-INVALID_BYTE + c - 65 + 0);\n        // c > 96 and c < 123\n        result += (((96 - c) & (c - 123)) >>> 8) & (-INVALID_BYTE + c - 97 + 26);\n        return result;\n    };\n    Coder.prototype._getPaddingLength = function (s) {\n        var paddingLength = 0;\n        if (this._paddingCharacter) {\n            for (var i = s.length - 1; i >= 0; i--) {\n                if (s[i] !== this._paddingCharacter) {\n                    break;\n                }\n                paddingLength++;\n            }\n            if (s.length < 4 || paddingLength > 2) {\n                throw new Error(\"Base64Coder: incorrect padding\");\n            }\n        }\n        return paddingLength;\n    };\n    return Coder;\n}());\nexports.Coder = Coder;\nvar stdCoder = new Coder();\nfunction encode(data) {\n    return stdCoder.encode(data);\n}\nexports.encode = encode;\nfunction decode(s) {\n    return stdCoder.decode(s);\n}\nexports.decode = decode;\n/**\n * Implements URL-safe Base64 encoding.\n * (Same as Base64, but '+' is replaced with '-', and '/' with '_').\n *\n * Operates in constant time.\n */\nvar URLSafeCoder = /** @class */ (function (_super) {\n    __extends(URLSafeCoder, _super);\n    function URLSafeCoder() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // URL-safe encoding have the following encoded/decoded ranges:\n    //\n    // ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789  -   _\n    // Index:   0 - 25                    26 - 51              52 - 61   62  63\n    // ASCII:  65 - 90                    97 - 122             48 - 57   45  95\n    //\n    URLSafeCoder.prototype._encodeByte = function (b) {\n        var result = b;\n        // b >= 0\n        result += 65;\n        // b > 25\n        result += ((25 - b) >>> 8) & ((0 - 65) - 26 + 97);\n        // b > 51\n        result += ((51 - b) >>> 8) & ((26 - 97) - 52 + 48);\n        // b > 61\n        result += ((61 - b) >>> 8) & ((52 - 48) - 62 + 45);\n        // b > 62\n        result += ((62 - b) >>> 8) & ((62 - 45) - 63 + 95);\n        return String.fromCharCode(result);\n    };\n    URLSafeCoder.prototype._decodeChar = function (c) {\n        var result = INVALID_BYTE;\n        // c == 45 (c > 44 and c < 46)\n        result += (((44 - c) & (c - 46)) >>> 8) & (-INVALID_BYTE + c - 45 + 62);\n        // c == 95 (c > 94 and c < 96)\n        result += (((94 - c) & (c - 96)) >>> 8) & (-INVALID_BYTE + c - 95 + 63);\n        // c > 47 and c < 58\n        result += (((47 - c) & (c - 58)) >>> 8) & (-INVALID_BYTE + c - 48 + 52);\n        // c > 64 and c < 91\n        result += (((64 - c) & (c - 91)) >>> 8) & (-INVALID_BYTE + c - 65 + 0);\n        // c > 96 and c < 123\n        result += (((96 - c) & (c - 123)) >>> 8) & (-INVALID_BYTE + c - 97 + 26);\n        return result;\n    };\n    return URLSafeCoder;\n}(Coder));\nexports.URLSafeCoder = URLSafeCoder;\nvar urlSafeCoder = new URLSafeCoder();\nfunction encodeURLSafe(data) {\n    return urlSafeCoder.encode(data);\n}\nexports.encodeURLSafe = encodeURLSafe;\nfunction decodeURLSafe(s) {\n    return urlSafeCoder.decode(s);\n}\nexports.decodeURLSafe = decodeURLSafe;\nexports.encodedLength = function (length) {\n    return stdCoder.encodedLength(length);\n};\nexports.maxDecodedLength = function (length) {\n    return stdCoder.maxDecodedLength(length);\n};\nexports.decodedLength = function (s) {\n    return stdCoder.decodedLength(s);\n};\n//# sourceMappingURL=base64.js.map","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n\n  import {\n    focusOnApplication, actOnBehalfOfCustomer, changeCustomerPasswordTo,\n    CustomerStorageEntry, setCustomerStorageEntryTo\n  } from 'voltcloud-for-browsers'\n\n  import { randomBytes, secretbox } from 'tweetnacl'\n  import { encode, decode }         from '@stablelib/base64'\n</script>\n\n<script lang=\"ts\">\n  let oldPassword:string, oldPasswordLooksBad:boolean, oldPasswordMessage:string\n  let newPassword:string, newPasswordLooksBad:boolean, newPasswordMessage:string\n  let newConfirmation:string, newConfirmationLooksBad:boolean, newConfirmationMessage:string\n\n  oldPassword = newPassword = newConfirmation = ''\n\n  $: switch (true) {\n    case (oldPassword === ''):\n      oldPasswordLooksBad = true;  oldPasswordMessage = 'please, enter your current password'\n      break\n    case (oldPassword.length < 10):\n      oldPasswordLooksBad = true;  oldPasswordMessage = 'your pcurrent assword is too short'\n      break\n    case ! /[0-9]/.test(oldPassword):\n      oldPasswordLooksBad = true;  oldPasswordMessage = 'your current password lacks any digits'\n      break\n    case (oldPassword.toLowerCase() === oldPassword):\n      oldPasswordLooksBad = true;  oldPasswordMessage = 'your current password lacks any uppercase characters'\n      break\n    case (oldPassword.toUpperCase() === oldPassword):\n      oldPasswordLooksBad = true;  oldPasswordMessage = 'your current password lacks any lowercase characters'\n      break\n    default:\n      oldPasswordLooksBad = false; oldPasswordMessage = 'your current password looks acceptable'\n  }\n\n  $: switch (true) {\n    case (newPassword === ''):\n      newPasswordLooksBad = true;  newPasswordMessage = 'please, enter your new password'\n      break\n    case (newPassword.length < 10):\n      newPasswordLooksBad = true;  newPasswordMessage = 'your new password is too short'\n      break\n    case ! /[0-9]/.test(newPassword):\n      newPasswordLooksBad = true;  newPasswordMessage = 'your new password lacks any digits'\n      break\n    case (newPassword.toLowerCase() === newPassword):\n      newPasswordLooksBad = true;  newPasswordMessage = 'your new password lacks any uppercase characters'\n      break\n    case (newPassword.toUpperCase() === newPassword):\n      newPasswordLooksBad = true;  newPasswordMessage = 'your new password lacks any lowercase characters'\n      break\n    default:\n      newPasswordLooksBad = false; newPasswordMessage = 'your new password looks acceptable'\n  }\n\n  $: switch (true) {\n    case (newConfirmation === ''):\n      newConfirmationLooksBad = true;  newConfirmationMessage = 'please, enter your new password again'\n      break\n    case (newConfirmation !== newPassword):\n      newConfirmationLooksBad = true;  newConfirmationMessage = 'new password differs from confirmation'\n      break\n    default:\n      newConfirmationLooksBad = false; newConfirmationMessage = 'new password and confirmation are equal'\n  }\n\n  $: ChangeIsForbidden = oldPasswordLooksBad || newPasswordLooksBad || newConfirmationLooksBad\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function changePassword () {\n    if ($Globals.Password === oldPassword) {\n      Globals.define('State','changingPassword')\n\n      try {\n        await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n        await actOnBehalfOfCustomer($Globals.EMailAddress,$Globals.Password)\n        await changeCustomerPasswordTo(newPassword)\n      } catch (Signal) {\n        switch (Signal.name) {\n          case 'LoginFailed':\n          case 'BadToken':\n            return Globals.define({ loggedIn:false, State:'loggedOut' })\n          default:\n            return Globals.define({\n              State:'CommunicationFailure', FailureReason:Signal.toString()\n            })\n        }\n      }\n\n      try {\n        let NoteText = decrypted((await CustomerStorageEntry('NoteText')) || '')\n          Globals.define('Password',newPassword)\n\n          if (NoteText == null) {                          // decryption failure\n            return Globals.define({\n              State:'ReencryptionFailure',\n              FailureReason:'DecryptionFailed: could not decrypt existing note'\n            })\n          }\n        await setCustomerStorageEntryTo('NoteText',encrypted(NoteText))\n      } catch (Signal) {\n        Globals.define('Password',newPassword)\n        return Globals.define({\n          State:'ReencryptionFailure', FailureReason:Signal.toString()\n        })\n      }\n\n      Globals.define('State','PasswordChanged')\n    } else {\n      Globals.define('State','wrongPassword')\n    }\n  }\n\n  function encrypted (Text:string):string {\n// @ts-ignore $Globals.EncryptionKey *is* a Uint8Array\n    let EncryptionKey  = $Globals.EncryptionKey as Uint8Array     // after login\n    let Nonce          = randomBytes(secretbox.nonceLength)\n    let encryptedValue = secretbox((new TextEncoder()).encode(Text), Nonce, EncryptionKey)\n\n    let Result = new Uint8Array(Nonce.length + encryptedValue.length)\n      Result.set(Nonce)\n      Result.set(encryptedValue,Nonce.length)\n    return encode(Result)                                  // now Base64-encoded\n  }\n\n  function decrypted (Base64Value:string):string | undefined {\n    if (Base64Value === '') { return '' }\n\n// @ts-ignore $Globals.EncryptionKey *is* a Uint8Array\n    let EncryptionKey = $Globals.EncryptionKey as Uint8Array      // after login\n\n    let Buffer\n      try {\n        Buffer = decode(Base64Value)\n      } catch (Signal) {\n        console.error('Base64 decode failed',Signal)\n        return undefined\n      }\n\n      if (Buffer.length < secretbox.nonceLength) {\n        return undefined\n      }\n    let Nonce  = Buffer.slice(0,secretbox.nonceLength)\n    let decryptedValue = secretbox.open(\n      Buffer.slice(secretbox.nonceLength), Nonce, EncryptionKey\n    )\n    return (\n      decryptedValue == null\n      ? undefined\n      : (new TextDecoder()).decode(decryptedValue)\n    )\n  }\n\n\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password Change</div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n\n    <div class=\"Block\">\n      You may now change your password. If successful, your notes will\n      automatically be re-encrypted using the new password.\n    </div>\n\n    <div class=\"Block\">\n      Important: please close all other currently running instances of this\n      application (on every device and browser) or those instances could\n      damage your data!\n    </div>\n\n    <input type=\"password\" bind:value={oldPassword} placeholder=\"your current password\">\n    <div class:Hint={true} class:invalid={oldPasswordLooksBad}>{oldPasswordMessage}</div>\n\n    <input type=\"password\" bind:value={newPassword} placeholder=\"your new password\">\n    <div class:Hint={true} class:invalid={newPasswordLooksBad}>{newPasswordMessage}</div>\n\n    <input type=\"password\" bind:value={newConfirmation} placeholder=\"confirm your new password\">\n    <div class:Hint={true} class:invalid={newConfirmationLooksBad}>{newConfirmationMessage}</div>\n\n    <button disabled={ChangeIsForbidden} on:click|preventDefault={changePassword}>Change Password</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','EMailAddressChange')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">EMail Address Change Failed</div>\n\n    <div class=\"Block\">\n      Your email address could not be changed because it is currently used by\n      somebody.\n    </div>\n\n    <div class=\"Block\">\n      Please try again with a different email address.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">EMail Address Changed</div>\n\n    <div class=\"Block\">\n      Your email address has been successfully changed.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">EMail Address is being changed...</div>\n  </div>\n</div>\n","//----------------------------------------------------------------------------//\n//                        JavaScript Interface Library                        //\n//----------------------------------------------------------------------------//\n/**** get a reference to the \"global\" object ****/\nvar global = /*#__PURE__*/ Function('return this')();\n// see https://stackoverflow.com/questions/3277182/how-to-get-the-global-object-in-javascript\n//------------------------------------------------------------------------------\n//--                             Object Functions                             --\n//------------------------------------------------------------------------------\n// allow methods from Object.prototype to be applied to \"vanilla\" objects\n/**** Object_hasOwnProperty ****/\nfunction Object_hasOwnProperty(Value, PropertyName) {\n    return ((Value == null) || // let this method crash like its original\n        ('hasOwnProperty' in Value) && (typeof Value.hasOwnProperty === 'function')\n        ? Value.hasOwnProperty(PropertyName)\n        : Object.prototype.hasOwnProperty.call(Value, PropertyName));\n}\n/**** Object_isPrototypeOf ****/\nfunction Object_isPrototypeOf(Value, Candidate) {\n    return ((Value == null) || // let this method crash like its original\n        ('isPrototypeOf' in Value) && (typeof Value.isPrototypeOf === 'function')\n        ? Value.isPrototypeOf(Candidate)\n        : Object.prototype.isPrototypeOf.call(Value, Candidate));\n}\n/**** Object_propertyIsEnumerable ****/\nfunction Object_propertyIsEnumerable(Value, PropertyName) {\n    return ((Value == null) || // let this method crash like its original\n        ('propertyIsEnumerable' in Value) && (typeof Value.propertyIsEnumerable === 'function')\n        ? Value.propertyIsEnumerable(PropertyName)\n        : Object.prototype.propertyIsEnumerable.call(Value, PropertyName));\n}\n/**** Object_toString ****/\nfunction Object_toString(Value) {\n    return ((Value == null) || // let this method crash like its original\n        ('toString' in Value) && (typeof Value.toString === 'function')\n        ? Value.toString()\n        : Object.prototype.toString.call(Value));\n}\n/**** Object_toLocaleString ****/\nfunction Object_toLocaleString(Value) {\n    return ((Value == null) || // let this method crash like its original\n        ('toLocaleString' in Value) && (typeof Value.toLocaleString === 'function')\n        ? Value.toLocaleString()\n        : Object.prototype.toString.call(Value)); // a missing \"toLocaleString\" method will crash Object.prototype.toLocaleString\n}\n/**** Object_valueOf ****/\nfunction Object_valueOf(Value) {\n    return ((Value == null) || // let this method crash like its original\n        ('valueOf' in Value) && (typeof Value.valueOf === 'function')\n        ? Value.valueOf()\n        : Object.prototype.valueOf.call(Value));\n}\n/**** ObjectMergedWith ****/\nfunction ObjectMergedWith(TargetObject) {\n    var otherObjectList = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        otherObjectList[_i - 1] = arguments[_i];\n    }\n    for (var i = 0, l = otherObjectList.length; i < l; i++) {\n        var otherObject = otherObjectList[i];\n        if (otherObject == null) {\n            continue;\n        }\n        if (typeof otherObject === 'object') {\n            for (var Key in otherObject) {\n                var Descriptor = Object.getOwnPropertyDescriptor(otherObject, Key);\n                if (Descriptor != null) {\n                    Object.defineProperty(TargetObject, Key, Descriptor);\n                }\n            }\n        }\n        else {\n            throwError('InvalidArgument: argument #' + (i + 1) + ' is not an object');\n        }\n    }\n    return TargetObject;\n}\n/**** throwError - simplifies construction of named errors ****/\nfunction throwError(Message) {\n    var Match = /^([$a-zA-Z][$a-zA-Z0-9]*):\\s*(\\S.+)\\s*$/.exec(Message);\n    if (Match == null) {\n        throw new Error(Message);\n    }\n    else {\n        var namedError = new Error(Match[2]);\n        namedError.name = Match[1];\n        throw namedError;\n    }\n}\n//------------------------------------------------------------------------------\n//--                      Value Classification Functions                      --\n//------------------------------------------------------------------------------\n/**** ValueExists ****/\nfunction ValueExists(Value) {\n    return (Value != null);\n}\n/**** ValueIsMissing ****/\nfunction ValueIsMissing(Value) {\n    return (Value == null);\n}\n/**** ValueIsBoolean ****/\nfunction ValueIsBoolean(Value) {\n    return (typeof Value === 'boolean') || (Value instanceof Boolean);\n}\n/**** ValueIsNumber ****/\nfunction ValueIsNumber(Value) {\n    return (typeof Value === 'number') || (Value instanceof Number);\n}\n/**** ValueIsFiniteNumber (pure \"isFinite\" breaks on objects) ****/\nfunction ValueIsFiniteNumber(Value) {\n    return ((typeof Value === 'number') || (Value instanceof Number)) && isFinite(Value.valueOf());\n}\n/**** ValueIsNaN (numeric, but NaN - this differs from pure \"isNaN\") ****/\nfunction ValueIsNaN(Value) {\n    return ((typeof Value === 'number') || (Value instanceof Number)) && isNaN(Value.valueOf());\n}\n/**** ValueIsNumberInRange ****/\nfunction ValueIsNumberInRange(Value, minValue, maxValue, withMin, withMax) {\n    if (withMin === void 0) { withMin = true; }\n    if (withMax === void 0) { withMax = true; }\n    if (!ValueIsNumber(Value) || isNaN(Value)) {\n        return false;\n    }\n    if (ValueIsFiniteNumber(minValue)) { // more robust than \"isFinite\" alone\n        if (ValueIsFiniteNumber(maxValue)) { // more robust than \"isFinite\" alone\n            if ((Value < minValue) || (!withMin && (Value === minValue)) ||\n                (Value > maxValue) || (!withMax && (Value === maxValue))) {\n                return false;\n            }\n        }\n        else {\n            if ((Value < minValue) || (!withMin && (Value === minValue))) {\n                return false;\n            }\n        }\n    }\n    else {\n        if (ValueIsFiniteNumber(maxValue)) { // more robust than \"isFinite\" alone\n            if ((Value > maxValue) || (!withMax && (Value === maxValue))) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/**** ValueIsInteger ****/\nfunction ValueIsInteger(Value) {\n    if ((typeof Value !== 'number') && !(Value instanceof Number)) {\n        return false;\n    }\n    Value = Value.valueOf();\n    return isFinite(Value) && (Math.round(Value) === Value);\n}\n/**** ValueIsIntegerInRange ****/\nfunction ValueIsIntegerInRange(Value, minValue, maxValue) {\n    if (!ValueIsInteger(Value) || isNaN(Value)) {\n        return false;\n    }\n    if (ValueIsFiniteNumber(minValue)) { // more robust than \"isFinite\" alone\n        if (ValueIsFiniteNumber(maxValue)) { // more robust than \"isFinite\" alone\n            if ((Value < minValue) || (Value > maxValue)) {\n                return false;\n            }\n        }\n        else {\n            if (Value < minValue) {\n                return false;\n            }\n        }\n    }\n    else {\n        if (ValueIsFiniteNumber(maxValue)) { // more robust than \"isFinite\" alone\n            if (Value > maxValue) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/**** ValueIsOrdinal ****/\nfunction ValueIsOrdinal(Value) {\n    if ((typeof Value !== 'number') && !(Value instanceof Number)) {\n        return false;\n    }\n    Value = Value.valueOf();\n    return isFinite(Value) && (Math.round(Value) === Value) && (Value >= 0);\n}\n/**** ValueIsCardinal ****/\nfunction ValueIsCardinal(Value) {\n    if ((typeof Value !== 'number') && !(Value instanceof Number)) {\n        return false;\n    }\n    Value = Value.valueOf();\n    return isFinite(Value) && (Math.round(Value) === Value) && (Value >= 1);\n}\n/**** ValueIsString ****/\nfunction ValueIsString(Value) {\n    return (typeof Value === 'string') || (Value instanceof String);\n}\n/**** ValueIs[Non]EmptyString ****/\nvar emptyStringPattern = /^\\s*$/;\nfunction ValueIsEmptyString(Value) {\n    return ((typeof Value === 'string') || (Value instanceof String)) && emptyStringPattern.test(Value.valueOf());\n}\nfunction ValueIsNonEmptyString(Value) {\n    return ((typeof Value === 'string') || (Value instanceof String)) && !emptyStringPattern.test(Value.valueOf());\n}\n/**** ValueIsStringMatching ****/\nfunction ValueIsStringMatching(Value, Pattern) {\n    return ((typeof Value === 'string') || (Value instanceof String)) && Pattern.test(Value.valueOf());\n}\n/**** ValueIsText ****/\nvar noCtrlCharsButCRLFPattern = /^[^\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]*$/;\nfunction ValueIsText(Value) {\n    return ValueIsStringMatching(Value, noCtrlCharsButCRLFPattern);\n}\n/**** ValueIsTextline ****/\nvar noCtrlCharsPattern = /^[^\\x00-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]*$/;\nfunction ValueIsTextline(Value) {\n    return ValueIsStringMatching(Value, noCtrlCharsPattern);\n}\n/**** ValueIsFunction ****/\nfunction ValueIsFunction(Value) {\n    return (typeof Value === 'function');\n}\n/**** ValueIsAnonymousFunction ****/\nfunction ValueIsAnonymousFunction(Value) {\n    return ((typeof Value === 'function') &&\n        ((Value.name == null) || (Value.name === '')));\n}\n/**** ValueIsNamedFunction ****/\nfunction ValueIsNamedFunction(Value) {\n    return ((typeof Value === 'function') &&\n        (Value.name != null) && (Value.name !== ''));\n}\n/**** ValueIsNativeFunction ****/\nfunction ValueIsNativeFunction(Value) {\n    return ((typeof Value === 'function') &&\n        /^function\\s*[^(]*\\(\\)\\s*\\{\\s*\\[native code\\]\\s*\\}\\s*$/.test(Value.toString()));\n}\n/**** ValueIsScriptedFunction ****/\nfunction ValueIsScriptedFunction(Value) {\n    return ((typeof Value === 'function') &&\n        !/^function\\s*[^(]*\\(\\)\\s*\\{\\s*\\[native code\\]\\s*\\}\\s*$/.test(Value.toString()));\n}\n/**** ValueIsObject ****/\nfunction ValueIsObject(Value) {\n    return (Value != null) && (typeof Value === 'object');\n}\n/**** ValueIsPlainObject ****/\nfunction ValueIsPlainObject(Value) {\n    return ((Value != null) && (typeof Value === 'object') &&\n        (Object.getPrototypeOf(Value) === Object.prototype));\n}\n/**** ValueIsVanillaObject ****/\nfunction ValueIsVanillaObject(Value) {\n    return ((Value != null) && (typeof Value === 'object') &&\n        !(Value instanceof Object));\n}\n/**** ValueIsArray ****/\nvar ValueIsArray = Array.isArray;\n/**** ValueIsList (\"dense\" array) ****/\nfunction ValueIsList(Value, minLength, maxLength) {\n    if (ValueIsArray(Value)) {\n        for (var i = 0, l = Value.length; i < l; i++) {\n            if (Value[i] === undefined) {\n                return false;\n            }\n        }\n        if (minLength != null) {\n            if (Value.length < minLength) {\n                return false;\n            }\n        }\n        if (maxLength != null) {\n            if (Value.length > maxLength) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n/**** ValueIsListSatisfying ****/\nfunction ValueIsListSatisfying(Value, Validator, minLength, maxLength) {\n    if (ValueIsArray(Value)) {\n        try {\n            for (var i = 0, l = Value.length; i < l; i++) {\n                if (Validator(Value[i]) == false) {\n                    return false;\n                }\n            }\n            if (minLength != null) {\n                if (Value.length < minLength) {\n                    return false;\n                }\n            }\n            if (maxLength != null) {\n                if (Value.length > maxLength) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        catch (Signal) { /* nop */ }\n    }\n    return false;\n}\n/**** ValueIsInstanceOf ****/\nfunction ValueIsInstanceOf(Value, Constructor) {\n    return (Value instanceof Constructor);\n}\n/**** ValueInheritsFrom ****/\nfunction ValueInheritsFrom(Value, Prototype) {\n    return Object_isPrototypeOf(Prototype, Value);\n}\n/**** ValueIsDate ****/\nfunction ValueIsDate(Value) {\n    return (Value instanceof Date);\n}\n/**** ValueIsError ****/\nfunction ValueIsError(Value) {\n    return (Value instanceof Error);\n}\n/**** ValueIsPromise ****/\nfunction ValueIsPromise(Value) {\n    return (Value != null) && (typeof Value.then === 'function');\n}\n// see https://stackoverflow.com/questions/27746304/how-do-i-tell-if-an-object-is-a-promise\n/**** ValueIsRegExp ****/\nfunction ValueIsRegExp(Value) {\n    return (Value instanceof RegExp);\n}\n/**** ValueIsOneOf ****/\nfunction ValueIsOneOf(Value, ValueList) {\n    return (ValueList.indexOf(Value) >= 0);\n} // no automatic unboxing of boxed values and vice-versa!\n/**** ValueIsColor ****/\nfunction ValueIsColor(Value) {\n    return ValueIsString(Value) && (ColorSet.hasOwnProperty(Value) ||\n        /^#[a-fA-F0-9]{6}$/.test(Value) ||\n        /^#[a-fA-F0-9]{8}$/.test(Value) ||\n        /^rgb\\([0-9]+,\\s*[0-9]+,\\s*[0-9]+\\)$/.test(Value) || // not perfect\n        /^rgba\\([0-9]+,\\s*[0-9]+,\\s*[0-9]+,([01]|[0]?[.][0-9]+)\\)$/.test(Value) // dto.\n    );\n}\n/**** ValueIsEMailAddress ****/\nvar EMailAddressPattern = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n// see https://stackoverflow.com/questions/201323/how-to-validate-an-email-address-using-a-regular-expression\nfunction ValueIsEMailAddress(Value) {\n    return ValueIsStringMatching(Value, EMailAddressPattern);\n}\n/**** ValueIsURL ****/\nvar noCtrlCharsOrWhitespacePattern = /^[^\\s\\x00-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]*$/;\nfunction ValueIsURL(Value) {\n    if (!ValueIsStringMatching(Value, noCtrlCharsOrWhitespacePattern) ||\n        (Value === '')) {\n        return false;\n    }\n    try {\n        new URL(Value, 'file://');\n        return true;\n    }\n    catch (Signal) {\n        return false;\n    }\n}\n//------------------------------------------------------------------------------\n//--                      Argument Validation Functions                       --\n//------------------------------------------------------------------------------\nvar rejectNil = false;\nvar acceptNil = true;\n/**** validatedArgument ****/\nfunction validatedArgument(Description, Argument, ValueIsValid, NilIsAcceptable, Expectation) {\n    if (Argument == null) {\n        if (NilIsAcceptable) {\n            return Argument;\n        }\n        else {\n            throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n        }\n    }\n    else {\n        if (ValueIsValid(Argument)) {\n            switch (true) {\n                case Argument instanceof Boolean:\n                case Argument instanceof Number:\n                case Argument instanceof String:\n                    return Argument.valueOf(); // unboxes any primitives\n                default:\n                    return Argument;\n            }\n        }\n        else {\n            throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is no valid \" + escaped(Expectation));\n        }\n    }\n}\n/**** ValidatorForClassifier ****/\nfunction ValidatorForClassifier(Classifier, NilIsAcceptable, Expectation) {\n    var Validator = function (Description, Argument) {\n        return validatedArgument(Description, Argument, Classifier, NilIsAcceptable, Expectation);\n    };\n    var ClassifierName = Classifier.name;\n    if ((ClassifierName != null) && /^ValueIs/.test(ClassifierName)) {\n        var ValidatorName = ClassifierName.replace(// derive name from validator\n        /^ValueIs/, NilIsAcceptable ? 'allow' : 'expect');\n        return FunctionWithName(Validator, ValidatorName);\n    }\n    else {\n        return Validator; // without any specific name\n    }\n}\n/**** FunctionWithName (works with older JS engines as well) ****/\nfunction FunctionWithName(originalFunction, desiredName) {\n    if (originalFunction == null) {\n        throwError('MissingArgument: no function given');\n    }\n    if (typeof originalFunction !== 'function') {\n        throwError('InvalidArgument: the given 1st Argument is not a JavaScript function');\n    }\n    if (desiredName == null) {\n        throwError('MissingArgument: no desired name given');\n    }\n    if ((typeof desiredName !== 'string') && !(desiredName instanceof String)) {\n        throwError('InvalidArgument: the given desired name is not a string');\n    }\n    if (originalFunction.name === desiredName) {\n        return originalFunction;\n    }\n    try {\n        Object.defineProperty(originalFunction, 'name', { value: desiredName });\n        if (originalFunction.name === desiredName) {\n            return originalFunction;\n        }\n    }\n    catch (signal) { /* ok - let's take the hard way */ }\n    var renamed = new Function('originalFunction', 'return function ' + desiredName + ' () {' +\n        'return originalFunction.apply(this,Array.prototype.slice.apply(arguments))' +\n        '}');\n    return renamed(originalFunction);\n} // also works with older JavaScript engines\n/**** expect[ed]Value ****/\nfunction expectValue(Description, Argument) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    else {\n        return Argument.valueOf();\n    }\n}\nvar expectedValue = expectValue;\n/**** allow/expect[ed]Boolean ****/\nvar allowBoolean = /*#__PURE__*/ ValidatorForClassifier(ValueIsBoolean, acceptNil, 'boolean value'), allowedBoolean = allowBoolean;\nvar expectBoolean = /*#__PURE__*/ ValidatorForClassifier(ValueIsBoolean, rejectNil, 'boolean value'), expectedBoolean = expectBoolean;\n/**** allow/expect[ed]Number ****/\nvar allowNumber = /*#__PURE__*/ ValidatorForClassifier(ValueIsNumber, acceptNil, 'numeric value'), allowedNumber = allowNumber;\nvar expectNumber = /*#__PURE__*/ ValidatorForClassifier(ValueIsNumber, rejectNil, 'numeric value'), expectedNumber = expectNumber;\n/**** allow/expect[ed]FiniteNumber ****/\nvar allowFiniteNumber = /*#__PURE__*/ ValidatorForClassifier(ValueIsFiniteNumber, acceptNil, 'finite numeric value'), allowedFiniteNumber = allowFiniteNumber;\nvar expectFiniteNumber = /*#__PURE__*/ ValidatorForClassifier(ValueIsFiniteNumber, rejectNil, 'finite numeric value'), expectedFiniteNumber = expectFiniteNumber;\n/**** allow/expect[ed]NaN ****/\nvar allowNaN = /*#__PURE__*/ ValidatorForClassifier(ValueIsNaN, acceptNil, 'NaN value'), allowedNaN = allowNaN;\nvar expectNaN = /*#__PURE__*/ ValidatorForClassifier(ValueIsNaN, rejectNil, 'NaN value'), expectedNaN = expectNaN;\n/**** allow[ed]NumberInRange ****/\nfunction allowNumberInRange(Description, Argument, minValue, maxValue, withMin, withMax) {\n    return (Argument == null\n        ? Argument\n        : expectedNumberInRange(Description, Argument, minValue, maxValue, withMin, withMax));\n}\nvar allowedNumberInRange = allowNumberInRange;\n/**** expect[ed]NumberInRange ****/\nfunction expectNumberInRange(Description, Argument, minValue, maxValue, withMin, withMax) {\n    expectNumber(Description, Argument);\n    if (isNaN(Argument)) {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is not-a-number\");\n    }\n    if (withMin == null) {\n        withMin = true;\n    }\n    if (withMax == null) {\n        withMax = true;\n    }\n    if ((minValue != null) && isFinite(minValue)) {\n        if ((maxValue != null) && isFinite(maxValue)) {\n            if ((Argument < minValue) || (!withMin && (Argument === minValue)) ||\n                (Argument > maxValue) || (!withMax && (Argument === maxValue))) {\n                throw new RangeError(\"the given \" + escaped(Description) + \" (\" + Argument + \") is outside \" +\n                    (\"the allowed range (\" + minValue + \"...\" + maxValue + \")\"));\n            }\n        }\n        else {\n            if ((Argument < minValue) || (!withMin && (Argument === minValue))) {\n                throw new RangeError(\"the given \" + escaped(Description) + \" is below the allowed \" +\n                    (\"minimum (\" + Argument + \" \" + (withMin ? '<' : '<=') + \" \" + minValue + \")\"));\n            }\n        }\n    }\n    else {\n        if ((maxValue != null) && isFinite(maxValue)) {\n            if ((Argument > maxValue) || (!withMax && (Argument === maxValue))) {\n                throw new RangeError(\"the given \" + escaped(Description) + \" exceeds the allowed \" +\n                    (\"maximum (\" + Argument + \" \" + (withMax ? '>' : '>=') + \" \" + maxValue + \")\"));\n            }\n        }\n    }\n    return Argument.valueOf();\n}\nvar expectedNumberInRange = expectNumberInRange;\n/**** allow/expect[ed]Integer ****/\nvar allowInteger = /*#__PURE__*/ ValidatorForClassifier(ValueIsInteger, acceptNil, 'integral numeric value'), allowedInteger = allowInteger;\nvar expectInteger = /*#__PURE__*/ ValidatorForClassifier(ValueIsInteger, rejectNil, 'integral numeric value'), expectedInteger = expectInteger;\n/**** allow[ed]IntegerInRange ****/\nfunction allowIntegerInRange(Description, Argument, minValue, maxValue) {\n    return (Argument == null\n        ? Argument\n        : expectedIntegerInRange(Description, Argument, minValue, maxValue));\n}\nvar allowedIntegerInRange = allowIntegerInRange;\n/**** expect[ed]IntegerInRange ****/\nfunction expectIntegerInRange(Description, Argument, minValue, maxValue) {\n    expectInteger(Description, Argument);\n    if (isNaN(Argument)) {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is not-a-number\");\n    }\n    if ((minValue != null) && isFinite(minValue)) {\n        if ((maxValue != null) && isFinite(maxValue)) {\n            if ((Argument < minValue) || (Argument > maxValue)) {\n                throw new RangeError(\"the given \" + escaped(Description) + \" (\" + Argument + \") is outside \" +\n                    (\"the allowed range (\" + minValue + \"...\" + maxValue + \")\"));\n            }\n        }\n        else {\n            if (Argument < minValue) {\n                throw new RangeError(\"the given \" + escaped(Description) + \" is below the allowed \" +\n                    (\"minimum (\" + Argument + \" < \" + minValue + \")\"));\n            }\n        }\n    }\n    else {\n        if ((maxValue != null) && isFinite(maxValue)) {\n            if (Argument > maxValue) {\n                throw new RangeError(\"the given \" + escaped(Description) + \" exceeds the allowed \" +\n                    (\"maximum (\" + Argument + \" > \" + maxValue + \")\"));\n            }\n        }\n    }\n    return Argument.valueOf();\n}\nvar expectedIntegerInRange = expectIntegerInRange;\n/**** allow/expect[ed]Ordinal ****/\nvar allowOrdinal = /*#__PURE__*/ ValidatorForClassifier(ValueIsOrdinal, acceptNil, 'ordinal number'), allowedOrdinal = allowOrdinal;\nvar expectOrdinal = /*#__PURE__*/ ValidatorForClassifier(ValueIsOrdinal, rejectNil, 'ordinal number'), expectedOrdinal = expectOrdinal;\n/**** allow/expect[ed]Cardinal ****/\nvar allowCardinal = /*#__PURE__*/ ValidatorForClassifier(ValueIsCardinal, acceptNil, 'cardinal number'), allowedCardinal = allowCardinal;\nvar expectCardinal = /*#__PURE__*/ ValidatorForClassifier(ValueIsCardinal, rejectNil, 'cardinal number'), expectedCardinal = expectCardinal;\n/**** allow/expect[ed]String ****/\nvar allowString = /*#__PURE__*/ ValidatorForClassifier(ValueIsString, acceptNil, 'literal string'), allowedString = allowString;\nvar expectString = /*#__PURE__*/ ValidatorForClassifier(ValueIsString, rejectNil, 'literal string'), expectedString = expectString;\n/**** allow/expect[ed]NonEmptyString ****/\nvar allowNonEmptyString = /*#__PURE__*/ ValidatorForClassifier(ValueIsNonEmptyString, acceptNil, 'non-empty literal string'), allowedNonEmptyString = allowNonEmptyString;\nvar expectNonEmptyString = /*#__PURE__*/ ValidatorForClassifier(ValueIsNonEmptyString, rejectNil, 'non-empty literal string'), expectedNonEmptyString = expectNonEmptyString;\n/**** allow[ed]StringMatching ****/\nfunction allowStringMatching(Description, Argument, Pattern) {\n    return (Argument == null\n        ? Argument\n        : expectedStringMatching(Description, Argument, Pattern));\n}\nvar allowedStringMatching = allowStringMatching;\n/**** expect[ed]StringMatching ****/\nfunction expectStringMatching(Description, Argument, Pattern) {\n    expectString(Description, Argument);\n    if (Pattern.test(Argument)) {\n        return Argument.valueOf();\n    }\n    else {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" does not match the specified pattern\");\n    }\n}\nvar expectedStringMatching = expectStringMatching;\n/**** allow/expect[ed]Text ****/\nvar allowText = /*#__PURE__*/ ValidatorForClassifier(ValueIsText, acceptNil, 'literal text'), allowedText = allowText;\nvar expectText = /*#__PURE__*/ ValidatorForClassifier(ValueIsText, rejectNil, 'literal text'), expectedText = expectText;\n/**** allow/expect[ed]Textline ****/\nvar allowTextline = /*#__PURE__*/ ValidatorForClassifier(ValueIsTextline, acceptNil, 'single line of text'), allowedTextline = allowTextline;\nvar expectTextline = /*#__PURE__*/ ValidatorForClassifier(ValueIsTextline, rejectNil, 'single line of text'), expectedTextline = expectTextline;\n/**** allow/expect[ed]Function ****/\nvar allowFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsFunction, acceptNil, 'JavaScript function'), allowedFunction = allowFunction;\nvar expectFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsFunction, rejectNil, 'JavaScript function'), expectedFunction = expectFunction;\n/**** allow/expect[ed]AnonymousFunction ****/\nvar allowAnonymousFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsAnonymousFunction, acceptNil, 'anonymous JavaScript function'), allowedAnonymousFunction = allowAnonymousFunction;\nvar expectAnonymousFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsAnonymousFunction, rejectNil, 'anonymous JavaScript function'), expectedAnonymousFunction = expectAnonymousFunction;\n/**** allow/expect[ed]NamedFunction ****/\nvar allowNamedFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsNamedFunction, acceptNil, 'named JavaScript function'), allowedNamedFunction = allowNamedFunction;\nvar expectNamedFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsNamedFunction, rejectNil, 'named JavaScript function'), expectedNamedFunction = expectNamedFunction;\n/**** allow/expect[ed]NativeFunction ****/\nvar allowNativeFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsNativeFunction, acceptNil, 'native JavaScript function'), allowedNativeFunction = allowNativeFunction;\nvar expectNativeFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsNativeFunction, rejectNil, 'native JavaScript function'), expectedNativeFunction = expectNativeFunction;\n/**** allow/expect[ed]ScriptedFunction ****/\nvar allowScriptedFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsScriptedFunction, acceptNil, 'scripted JavaScript function'), allowedScriptedFunction = allowScriptedFunction;\nvar expectScriptedFunction = /*#__PURE__*/ ValidatorForClassifier(ValueIsScriptedFunction, rejectNil, 'scripted JavaScript function'), expectedScriptedFunction = expectScriptedFunction;\n/**** allow/expect[ed]Object ****/\nvar allowObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsObject, acceptNil, 'JavaScript object'), allowedObject = allowObject;\nvar expectObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsObject, rejectNil, 'JavaScript object'), expectedObject = expectObject;\n/**** allow/expect[ed]PlainObject ****/\nvar allowPlainObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsPlainObject, acceptNil, '\"plain\" JavaScript object'), allowedPlainObject = allowPlainObject;\nvar expectPlainObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsPlainObject, rejectNil, '\"plain\" JavaScript object'), expectedPlainObject = expectPlainObject;\n/**** allow/expect[ed]VanillaObject ****/\nvar allowVanillaObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsVanillaObject, acceptNil, '\"vanilla\" JavaScript object'), allowedVanillaObject = allowVanillaObject;\nvar expectVanillaObject = /*#__PURE__*/ ValidatorForClassifier(ValueIsVanillaObject, rejectNil, '\"vanilla\" JavaScript object'), expectedVanillaObject = expectVanillaObject;\n/**** allow[ed]Array ****/\nfunction allowArray(Description, Argument) {\n    return (Argument == null\n        ? Argument\n        : expectedArray(Description, Argument));\n}\nvar allowedArray = allowArray;\n/**** expect[ed]Array ****/\nfunction expectArray(Description, Argument) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    if (ValueIsArray(Argument)) {\n        return Argument;\n    }\n    else {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is no JavaScript array\");\n    }\n}\nvar expectedArray = expectArray;\n/**** allow[ed]List ****/\nfunction allowList(Description, Argument, Expectation, minLength, maxLength) {\n    return (Argument == null\n        ? Argument\n        : expectedList(Description, Argument, Expectation, minLength, maxLength));\n}\nvar allowedList = allowList;\n/**** expect[ed]List ****/\nfunction expectList(Description, Argument, Expectation, minLength, maxLength) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    if (ValueIsList(Argument, minLength, maxLength)) {\n        return Argument;\n    }\n    else {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is \" + (Expectation == null\n            ? 'either not a list or contains an invalid number of elements'\n            : 'no ' + escaped(Expectation)));\n    }\n}\nvar expectedList = expectList;\n/**** allow[ed]ListSatisfying ****/\nfunction allowListSatisfying(Description, Argument, Validator, Expectation, minLength, maxLength) {\n    return (Argument == null\n        ? Argument\n        : expectedListSatisfying(Description, Argument, Validator, Expectation, minLength, maxLength));\n}\nvar allowedListSatisfying = allowListSatisfying;\n/**** expect[ed]ListSatisfying ****/\nfunction expectListSatisfying(Description, Argument, Validator, Expectation, minLength, maxLength) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    if (ValueIsListSatisfying(Argument, Validator, minLength, maxLength)) {\n        return Argument;\n    }\n    else {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is \" + (Expectation == null\n            ? 'either not a list or contains invalid elements'\n            : 'no ' + escaped(Expectation)));\n    }\n}\nvar expectedListSatisfying = expectListSatisfying;\n/**** allow[ed]InstanceOf ****/\nfunction allowInstanceOf(Description, Argument, constructor, Expectation) {\n    return (Argument == null\n        ? Argument\n        : expectedInstanceOf(Description, Argument, constructor, Expectation));\n}\nvar allowedInstanceOf = allowInstanceOf;\n/**** expect[ed]InstanceOf ****/\nfunction expectInstanceOf(Description, Argument, constructor, Expectation) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    if (!(Argument instanceof constructor)) {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is no \" + escaped(Expectation));\n    }\n    return Argument;\n}\nvar expectedInstanceOf = expectInstanceOf;\n/**** allow[ed]ValueInheritingFrom ****/\nfunction allowValueInheritingFrom(Description, Argument, prototype, Expectation) {\n    return (Argument == null\n        ? Argument\n        : expectedValueInheritingFrom(Description, Argument, prototype, Expectation));\n}\nvar allowedValueInheritingFrom = allowValueInheritingFrom;\n/**** expect[ed]ValueInheritingFrom ****/\nfunction expectValueInheritingFrom(Description, Argument, prototype, Expectation) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    if (prototype.isPrototypeOf(Argument)) {\n        return Argument;\n    }\n    else {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is no \" + escaped(Expectation));\n    }\n}\nvar expectedValueInheritingFrom = expectValueInheritingFrom;\n/**** allow/expect[ed]Date ****/\nvar allowDate = /*#__PURE__*/ ValidatorForClassifier(ValueIsDate, acceptNil, 'JavaScript Date object'), allowedDate = allowDate;\nvar expectDate = /*#__PURE__*/ ValidatorForClassifier(ValueIsDate, rejectNil, 'JavaScript Date object'), expectedDate = expectDate;\n/**** allow/expect[ed]Error ****/\nvar allowError = /*#__PURE__*/ ValidatorForClassifier(ValueIsError, acceptNil, 'JavaScript Error object'), allowedError = allowError;\nvar expectError = /*#__PURE__*/ ValidatorForClassifier(ValueIsError, rejectNil, 'JavaScript Error object'), expectedError = expectError;\n/**** allow/expect[ed]Promise ****/\nvar allowPromise = /*#__PURE__*/ ValidatorForClassifier(ValueIsPromise, acceptNil, 'JavaScript Promise (or \"Thenable\") object'), allowedPromise = allowPromise;\nvar expectPromise = /*#__PURE__*/ ValidatorForClassifier(ValueIsPromise, rejectNil, 'JavaScript Promise (or \"Thenable\") object'), expectedPromise = expectPromise;\n/**** allow/expect[ed]RegExp ****/\nvar allowRegExp = /*#__PURE__*/ ValidatorForClassifier(ValueIsRegExp, acceptNil, 'JavaScript RegExp object'), allowedRegExp = allowRegExp;\nvar expectRegExp = /*#__PURE__*/ ValidatorForClassifier(ValueIsRegExp, rejectNil, 'JavaScript RegExp object'), expectedRegExp = expectRegExp;\n/**** allow[ed]OneOf ****/\nfunction allowOneOf(Description, Argument, ValueList) {\n    return (Argument == null\n        ? Argument\n        : expectedOneOf(Description, Argument, ValueList));\n}\nvar allowedOneOf = allowOneOf;\n/**** expect[ed]OneOf ****/\nfunction expectOneOf(Description, Argument, ValueList) {\n    if (Argument == null) {\n        throwError(\"MissingArgument: no \" + escaped(Description) + \" given\");\n    }\n    if (ValueIsOneOf(Argument, ValueList)) {\n        return ( // unboxes any primitives\n        (Argument == null) || (typeof Argument.valueOf !== 'function')\n            ? Argument\n            : Argument.valueOf());\n    }\n    else {\n        throwError(\"InvalidArgument: the given \" + escaped(Description) + \" is not among the supported values\");\n    }\n}\nvar expectedOneOf = expectOneOf;\n/**** allow/expect[ed]Color ****/\nvar allowColor = /*#__PURE__*/ ValidatorForClassifier(ValueIsColor, acceptNil, 'valid CSS color specification'), allowedColor = allowColor;\nvar expectColor = /*#__PURE__*/ ValidatorForClassifier(ValueIsColor, rejectNil, 'valid CSS color specification'), expectedColor = expectColor;\n/**** allow/expect[ed]EMailAddress ****/\nvar allowEMailAddress = /*#__PURE__*/ ValidatorForClassifier(ValueIsEMailAddress, acceptNil, 'valid EMail address'), allowedEMailAddress = allowEMailAddress;\nvar expectEMailAddress = /*#__PURE__*/ ValidatorForClassifier(ValueIsEMailAddress, rejectNil, 'valid EMail address'), expectedEMailAddress = expectEMailAddress;\n/**** allow/expect[ed]URL ****/\nvar allowURL = /*#__PURE__*/ ValidatorForClassifier(ValueIsURL, acceptNil, 'valid URL'), allowedURL = allowURL;\nvar expectURL = /*#__PURE__*/ ValidatorForClassifier(ValueIsURL, rejectNil, 'valid URL'), expectedURL = expectURL;\n/**** escaped - escapes all control characters in a given string ****/\nfunction escaped(Text) {\n    var EscapeSequencePattern = /\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}|\\\\[0bfnrtv'\"\\\\\\/]?/g;\n    var CtrlCharCodePattern = /[\\x00-\\x1f\\x7f-\\x9f]/g;\n    return Text\n        .replace(EscapeSequencePattern, function (Match) {\n        return (Match === '\\\\' ? '\\\\\\\\' : Match);\n    })\n        .replace(CtrlCharCodePattern, function (Match) {\n        switch (Match) {\n            case '\\0': return '\\\\0';\n            case '\\b': return '\\\\b';\n            case '\\f': return '\\\\f';\n            case '\\n': return '\\\\n';\n            case '\\r': return '\\\\r';\n            case '\\t': return '\\\\t';\n            case '\\v': return '\\\\v';\n            default: {\n                var HexCode = Match.charCodeAt(0).toString(16);\n                return '\\\\x' + '00'.slice(HexCode.length) + HexCode;\n            }\n        }\n    });\n}\n/**** unescaped - evaluates all escape sequences in a given string ****/\nfunction unescaped(Text) {\n    var EscapeSequencePattern = /\\\\[0bfnrtv'\"\\\\\\/]|\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}/g;\n    return Text\n        .replace(EscapeSequencePattern, function (Match) {\n        switch (Match) {\n            case '\\\\0': return '\\0';\n            case '\\\\b': return '\\b';\n            case '\\\\f': return '\\f';\n            case '\\\\n': return '\\n';\n            case '\\\\r': return '\\r';\n            case '\\\\t': return '\\t';\n            case '\\\\v': return '\\v';\n            case '\\\\\\'': return \"'\";\n            case '\\\\\"': return '\"';\n            case '\\\\\\\\': return \"\\\\\";\n            default: {\n                var CharCode = parseInt(Match.slice(2), 16);\n                return String.fromCharCode(CharCode);\n            }\n        }\n    });\n}\n/**** quotable - makes a given string ready to be put in single/double quotes ****/\nfunction quotable(Text, Quote) {\n    if (Quote === void 0) { Quote = '\"'; }\n    var EscSeqOrSglQuotePattern = /\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}|\\\\[0bfnrtv'\"\\\\\\/]?|'/g;\n    var EscSeqOrDblQuotePattern = /\\\\x[0-9a-zA-Z]{2}|\\\\u[0-9a-zA-Z]{4}|\\\\[0bfnrtv'\"\\\\\\/]?|\"/g;\n    var CtrlCharCodePattern = /[\\x00-\\x1f\\x7f-\\x9f]/g;\n    return Text\n        .replace(Quote === \"'\" ? EscSeqOrSglQuotePattern : EscSeqOrDblQuotePattern, function (Match) {\n        switch (Match) {\n            case \"'\": return \"\\\\'\";\n            case '\"': return '\\\\\"';\n            case '\\\\': return '\\\\\\\\';\n            default: return Match;\n        }\n    })\n        .replace(CtrlCharCodePattern, function (Match) {\n        switch (Match) {\n            case '\\0': return '\\\\0';\n            case '\\b': return '\\\\b';\n            case '\\f': return '\\\\f';\n            case '\\n': return '\\\\n';\n            case '\\r': return '\\\\r';\n            case '\\t': return '\\\\t';\n            case '\\v': return '\\\\v';\n            default: {\n                var HexCode = Match.charCodeAt(0).toString(16);\n                return '\\\\x' + '00'.slice(HexCode.length) + HexCode;\n            }\n        }\n    });\n}\n/**** quoted ****/\nfunction quoted(Text, Quote) {\n    if (Quote === void 0) { Quote = '\"'; }\n    return Quote + quotable(Text, Quote) + Quote;\n}\n/**** HTMLsafe ****/\nfunction HTMLsafe(Argument, EOLReplacement) {\n    EOLReplacement = (EOLReplacement || '').trim() || '<br/>';\n    return Argument.replace(/[&<>\"'\\u0000-\\u001F\\u007F-\\u009F\\\\]/g, function (Match) {\n        switch (Match) {\n            case '&': return '&amp;';\n            case '<': return '&lt;';\n            case '>': return '&gt;';\n            case '\"': return '&quot;';\n            case \"'\": return '&apos;';\n            case '\\b': return '&#92;b';\n            case '\\f': return '&#92;f';\n            case '\\n': return EOLReplacement;\n            case '\\r': return '&#92;r';\n            case '\\t': return '&#92;t';\n            case '\\v': return '&#92;v';\n            case '\\\\': return '&#92;';\n            default:\n                var Result = Match.charCodeAt(0).toString(16);\n                return '&#x0000'.substring(3, 7 - Result.length) + Result + ';';\n        }\n    });\n}\n/**** MarkDownSafe ****/\nfunction MarkDownSafe(Argument, EOLReplacement) {\n    return HTMLsafe(Argument, EOLReplacement).replace(/:/g, '&#58;');\n}\n/**** ValuesDiffer ****/\nfunction ValuesDiffer(thisValue, otherValue, Mode) {\n    if (thisValue === otherValue) {\n        return false;\n    }\n    var thisType = typeof thisValue;\n    if (thisType !== typeof otherValue) {\n        return true;\n    }\n    /**** ArraysDiffer ****/\n    function ArraysDiffer(thisArray, otherArray, Mode) {\n        if (!Array.isArray(otherArray)) {\n            return true;\n        }\n        if (thisArray.length !== otherArray.length) {\n            return true;\n        }\n        for (var i = 0, l = thisArray.length; i < l; i++) {\n            if (ValuesDiffer(thisArray[i], otherArray[i], Mode)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**** ObjectsDiffer ****/\n    function ObjectsDiffer(thisObject, otherObject, Mode) {\n        if (Object.getPrototypeOf(thisObject) !== Object.getPrototypeOf(otherObject)) {\n            return true;\n        }\n        for (var key in thisObject) {\n            if (!(key in otherObject)) {\n                return true;\n            }\n        }\n        for (var key in otherObject) {\n            if (!(key in thisObject)) {\n                return true;\n            }\n            if (ValuesDiffer(thisObject[key], otherObject[key], Mode)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    switch (thisType) {\n        case 'undefined':\n        case 'boolean':\n        case 'string':\n        case 'function': return true; // most primitives are compared using \"===\"\n        case 'number': return ((isNaN(thisValue) !== isNaN(otherValue)) ||\n            (Math.abs(thisValue - otherValue) > Number.EPSILON));\n        case 'object':\n            if (thisValue == null) {\n                return true;\n            } // since \"other_value\" != null!\n            if (otherValue == null) {\n                return true;\n            } // since \"this_value\" != null!\n            if ((Mode === 'by-value') && ((thisValue instanceof Boolean) ||\n                (thisValue instanceof Number) ||\n                (thisValue instanceof String))) {\n                return (thisValue.valueOf() !== otherValue.valueOf());\n            }\n            if (Array.isArray(thisValue)) {\n                return ArraysDiffer(thisValue, otherValue, Mode);\n            }\n            return (Mode === 'by-reference'\n                ? true // because (thisValue !== otherValue)\n                : ObjectsDiffer(thisValue, otherValue, Mode));\n        default: return true; // unsupported property type\n    }\n    return true;\n}\n/**** ValuesAreEqual ****/\nfunction ValuesAreEqual(thisValue, otherValue, Mode) {\n    return !ValuesDiffer(thisValue, otherValue, Mode);\n}\n/**** ObjectIsEmpty ****/\nfunction ObjectIsEmpty(Candidate) {\n    expectObject('candidate', Candidate);\n    for (var Key in Candidate) {\n        if (Object_hasOwnProperty(Candidate, Key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**** ObjectIsNotEmpty ****/\nfunction ObjectIsNotEmpty(Candidate) {\n    return !ObjectIsEmpty(Candidate);\n}\n/**** StringIsEmpty ****/\nfunction StringIsEmpty(Candidate) {\n    return /^\\s*$/.test(Candidate);\n}\n/**** StringIsNotEmpty ****/\nfunction StringIsNotEmpty(Candidate) {\n    return !StringIsEmpty(Candidate);\n}\n/**** constrained ****/\nfunction constrained(Value, Minimum, Maximum) {\n    if (Minimum === void 0) { Minimum = -Infinity; }\n    if (Maximum === void 0) { Maximum = Infinity; }\n    return Math.max(Minimum, Math.min(Value, Maximum));\n}\n//------------------------------------------------------------------------------\n//--                             Color Utilities                              --\n//------------------------------------------------------------------------------\n// built-in color names (see http://www.w3.org/TR/SVG/types.html#ColorKeywords) ----\nvar ColorSet = {\n    transparent: 'rgba(0,0,0,0,0.0)',\n    aliceblue: 'rgba(240,248,255,1.0)', lightpink: 'rgba(255,182,193,1.0)',\n    antiquewhite: 'rgba(250,235,215,1.0)', lightsalmon: 'rgba(255,160,122,1.0)',\n    aqua: 'rgba(0,255,255,1.0)', lightseagreen: 'rgba(32,178,170,1.0)',\n    aquamarine: 'rgba(127,255,212,1.0)', lightskyblue: 'rgba(135,206,250,1.0)',\n    azure: 'rgba(240,255,255,1.0)', lightslategray: 'rgba(119,136,153,1.0)',\n    beige: 'rgba(245,245,220,1.0)', lightslategrey: 'rgba(119,136,153,1.0)',\n    bisque: 'rgba(255,228,196,1.0)', lightsteelblue: 'rgba(176,196,222,1.0)',\n    black: 'rgba(0,0,0,1.0)', lightyellow: 'rgba(255,255,224,1.0)',\n    blanchedalmond: 'rgba(255,235,205,1.0)', lime: 'rgba(0,255,0,1.0)',\n    blue: 'rgba(0,0,255,1.0)', limegreen: 'rgba(50,205,50,1.0)',\n    blueviolet: 'rgba(138,43,226,1.0)', linen: 'rgba(250,240,230,1.0)',\n    brown: 'rgba(165,42,42,1.0)', magenta: 'rgba(255,0,255,1.0)',\n    burlywood: 'rgba(222,184,135,1.0)', maroon: 'rgba(128,0,0,1.0)',\n    cadetblue: 'rgba(95,158,160,1.0)', mediumaquamarine: 'rgba(102,205,170,1.0)',\n    chartreuse: 'rgba(127,255,0,1.0)', mediumblue: 'rgba(0,0,205,1.0)',\n    chocolate: 'rgba(210,105,30,1.0)', mediumorchid: 'rgba(186,85,211,1.0)',\n    coral: 'rgba(255,127,80,1.0)', mediumpurple: 'rgba(147,112,219,1.0)',\n    cornflowerblue: 'rgba(100,149,237,1.0)', mediumseagreen: 'rgba(60,179,113,1.0)',\n    cornsilk: 'rgba(255,248,220,1.0)', mediumslateblue: 'rgba(123,104,238,1.0)',\n    crimson: 'rgba(220,20,60,1.0)', mediumspringgreen: 'rgba(0,250,154,1.0)',\n    cyan: 'rgba(0,255,255,1.0)', mediumturquoise: 'rgba(72,209,204,1.0)',\n    darkblue: 'rgba(0,0,139,1.0)', mediumvioletred: 'rgba(199,21,133,1.0)',\n    darkcyan: 'rgba(0,139,139,1.0)', midnightblue: 'rgba(25,25,112,1.0)',\n    darkgoldenrod: 'rgba(184,134,11,1.0)', mintcream: 'rgba(245,255,250,1.0)',\n    darkgray: 'rgba(169,169,169,1.0)', mistyrose: 'rgba(255,228,225,1.0)',\n    darkgreen: 'rgba(0,100,0,1.0)', moccasin: 'rgba(255,228,181,1.0)',\n    darkgrey: 'rgba(169,169,169,1.0)', navajowhite: 'rgba(255,222,173,1.0)',\n    darkkhaki: 'rgba(189,183,107,1.0)', navy: 'rgba(0,0,128,1.0)',\n    darkmagenta: 'rgba(139,0,139,1.0)', oldlace: 'rgba(253,245,230,1.0)',\n    darkolivegreen: 'rgba(85,107,47,1.0)', olive: 'rgba(128,128,0,1.0)',\n    darkorange: 'rgba(255,140,0,1.0)', olivedrab: 'rgba(107,142,35,1.0)',\n    darkorchid: 'rgba(153,50,204,1.0)', orange: 'rgba(255,165,0,1.0)',\n    darkred: 'rgba(139,0,0,1.0)', orangered: 'rgba(255,69,0,1.0)',\n    darksalmon: 'rgba(233,150,122,1.0)', orchid: 'rgba(218,112,214,1.0)',\n    darkseagreen: 'rgba(143,188,143,1.0)', palegoldenrod: 'rgba(238,232,170,1.0)',\n    darkslateblue: 'rgba(72,61,139,1.0)', palegreen: 'rgba(152,251,152,1.0)',\n    darkslategray: 'rgba(47,79,79,1.0)', paleturquoise: 'rgba(175,238,238,1.0)',\n    darkslategrey: 'rgba(47,79,79,1.0)', palevioletred: 'rgba(219,112,147,1.0)',\n    darkturquoise: 'rgba(0,206,209,1.0)', papayawhip: 'rgba(255,239,213,1.0)',\n    darkviolet: 'rgba(148,0,211,1.0)', peachpuff: 'rgba(255,218,185,1.0)',\n    deeppink: 'rgba(255,20,147,1.0)', peru: 'rgba(205,133,63,1.0)',\n    deepskyblue: 'rgba(0,191,255,1.0)', pink: 'rgba(255,192,203,1.0)',\n    dimgray: 'rgba(105,105,105,1.0)', plum: 'rgba(221,160,221,1.0)',\n    dimgrey: 'rgba(105,105,105,1.0)', powderblue: 'rgba(176,224,230,1.0)',\n    dodgerblue: 'rgba(30,144,255,1.0)', purple: 'rgba(128,0,128,1.0)',\n    firebrick: 'rgba(178,34,34,1.0)', red: 'rgba(255,0,0,1.0)',\n    floralwhite: 'rgba(255,250,240,1.0)', rosybrown: 'rgba(188,143,143,1.0)',\n    forestgreen: 'rgba(34,139,34,1.0)', royalblue: 'rgba(65,105,225,1.0)',\n    fuchsia: 'rgba(255,0,255,1.0)', saddlebrown: 'rgba(139,69,19,1.0)',\n    gainsboro: 'rgba(220,220,220,1.0)', salmon: 'rgba(250,128,114,1.0)',\n    ghostwhite: 'rgba(248,248,255,1.0)', sandybrown: 'rgba(244,164,96,1.0)',\n    gold: 'rgba(255,215,0,1.0)', seagreen: 'rgba(46,139,87,1.0)',\n    goldenrod: 'rgba(218,165,32,1.0)', seashell: 'rgba(255,245,238,1.0)',\n    gray: 'rgba(128,128,128,1.0)', sienna: 'rgba(160,82,45,1.0)',\n    green: 'rgba(0,128,0,1.0)', silver: 'rgba(192,192,192,1.0)',\n    greenyellow: 'rgba(173,255,47,1.0)', skyblue: 'rgba(135,206,235,1.0)',\n    grey: 'rgba(128,128,128,1.0)', slateblue: 'rgba(106,90,205,1.0)',\n    honeydew: 'rgba(240,255,240,1.0)', slategray: 'rgba(112,128,144,1.0)',\n    hotpink: 'rgba(255,105,180,1.0)', slategrey: 'rgba(112,128,144,1.0)',\n    indianred: 'rgba(205,92,92,1.0)', snow: 'rgba(255,250,250,1.0)',\n    indigo: 'rgba(75,0,130,1.0)', springgreen: 'rgba(0,255,127,1.0)',\n    ivory: 'rgba(255,255,240,1.0)', steelblue: 'rgba(70,130,180,1.0)',\n    khaki: 'rgba(240,230,140,1.0)', tan: 'rgba(210,180,140,1.0)',\n    lavender: 'rgba(230,230,250,1.0)', teal: 'rgba(0,128,128,1.0)',\n    lavenderblush: 'rgba(255,240,245,1.0)', thistle: 'rgba(216,191,216,1.0)',\n    lawngreen: 'rgba(124,252,0,1.0)', tomato: 'rgba(255,99,71,1.0)',\n    lemonchiffon: 'rgba(255,250,205,1.0)', turquoise: 'rgba(64,224,208,1.0)',\n    lightblue: 'rgba(173,216,230,1.0)', violet: 'rgba(238,130,238,1.0)',\n    lightcoral: 'rgba(240,128,128,1.0)', wheat: 'rgba(245,222,179,1.0)',\n    lightcyan: 'rgba(224,255,255,1.0)', white: 'rgba(255,255,255,1.0)',\n    lightgoldenrodyellow: 'rgba(250,250,210,1.0)', whitesmoke: 'rgba(245,245,245,1.0)',\n    lightgray: 'rgba(211,211,211,1.0)', yellow: 'rgba(255,255,0,1.0)',\n    lightgreen: 'rgba(144,238,144,1.0)', yellowgreen: 'rgba(154,205,50,1.0)',\n    lightgrey: 'rgba(211,211,211,1.0)',\n};\n/**** HexColor - converts a given color to #rrggbbaa ****/\nfunction HexColor(Color) {\n    var lowerColor = Color.toLowerCase();\n    if (ColorSet.hasOwnProperty(lowerColor)) {\n        // @ts-ignore TS dislikes indexing with literal keys\n        Color = ColorSet[lowerColor];\n    } // do not return here as color is now in RGBA format\n    if (/^#[a-fA-F0-9]{6}$/.test(Color)) {\n        return Color + 'FF';\n    }\n    if (/^#[a-fA-F0-9]{8}$/.test(Color)) {\n        return Color;\n    }\n    var HexDigit = '0123456789ABCDEF';\n    function dec2hex(Value) {\n        if (Value > 255) {\n            Value = 255;\n        }\n        return HexDigit[Math.trunc(Value / 16)] + HexDigit[Value % 16];\n    }\n    var RGBPattern = /^rgb\\(([0-9]+),\\s*([0-9]+),\\s*([0-9]+)\\)$/i; // not perfect\n    var Match = RGBPattern.exec(Color);\n    if (Match != null) {\n        return ('#' +\n            dec2hex(parseInt(Match[1], 10)) +\n            dec2hex(parseInt(Match[2], 10)) +\n            dec2hex(parseInt(Match[3], 10)) + 'FF');\n    }\n    var RGBAPattern = /^rgba\\(([(0-9]+),\\s*([0-9]+),\\s*([0-9]+),\\s*([01]?[.][0-9]+|[01])\\)$/i; // not perfect\n    Match = RGBAPattern.exec(Color);\n    if (Match != null) {\n        return ('#' +\n            dec2hex(parseInt(Match[1], 10)) +\n            dec2hex(parseInt(Match[2], 10)) +\n            dec2hex(parseInt(Match[3], 10)) +\n            dec2hex(parseFloat(Match[4])));\n    }\n    throwError('InvalidArgument: the given Value is not a valid CSS Color specification');\n}\n/**** RGBAColor - converts a given color to RGBA(r,g,b,a) ****/\nfunction RGBAColor(Color) {\n    var lowerColor = Color.toLowerCase();\n    if (ColorSet.hasOwnProperty(lowerColor)) {\n        // @ts-ignore TS dislikes indexing with literal keys\n        return ColorSet[lowerColor]; // color is already in RGBA format\n    }\n    if (/^#[a-fA-F0-9]{6}$/.test(Color)) {\n        return ('rgba(' +\n            parseInt(Color.slice(1, 3), 16) + ',' +\n            parseInt(Color.slice(3, 5), 16) + ',' +\n            parseInt(Color.slice(5, 7), 16) + ', 1' +\n            ')');\n    }\n    if (/^#[a-fA-F0-9]{8}$/.test(Color)) {\n        return ('rgba(' +\n            parseInt(Color.slice(1, 3), 16) + ',' +\n            parseInt(Color.slice(3, 5), 16) + ',' +\n            parseInt(Color.slice(5, 7), 16) + ',' +\n            (parseInt(Color.slice(7), 16) / 255) +\n            ')');\n    }\n    var RGBPattern = /^rgb\\(([0-9]+),\\s*([0-9]+),\\s*([0-9]+)\\)$/i; //not perfect\n    var Match = RGBPattern.exec(Color);\n    if (Match != null) {\n        return Color.slice(0, Color.length - 1) + ',1)';\n    }\n    var RGBAPattern = /^rgba\\(([(0-9]+),\\s*([0-9]+),\\s*([0-9]+),\\s*([0]?[.][0-9]+|[01])\\)$/i; // not perfect\n    Match = RGBAPattern.exec(Color);\n    if (Match != null) {\n        return Color;\n    }\n    throwError('InvalidArgument: the given Value is not a valid CSS Color specification');\n}\n/**** shortHexColor - converts a given color into #RRGGBB ****/\nfunction shortHexColor(Color) {\n    return HexColor(Color).slice(0, 7);\n}\n\nexport { ColorSet, FunctionWithName, HTMLsafe, HexColor, MarkDownSafe, ObjectIsEmpty, ObjectIsNotEmpty, ObjectMergedWith, Object_hasOwnProperty, Object_isPrototypeOf, Object_propertyIsEnumerable, Object_toLocaleString, Object_toString, Object_valueOf, RGBAColor, StringIsEmpty, StringIsNotEmpty, ValidatorForClassifier, ValueExists, ValueInheritsFrom, ValueIsAnonymousFunction, ValueIsArray, ValueIsBoolean, ValueIsCardinal, ValueIsColor, ValueIsDate, ValueIsEMailAddress, ValueIsEmptyString, ValueIsError, ValueIsFiniteNumber, ValueIsFunction, ValueIsInstanceOf, ValueIsInteger, ValueIsIntegerInRange, ValueIsList, ValueIsListSatisfying, ValueIsMissing, ValueIsNaN, ValueIsNamedFunction, ValueIsNativeFunction, ValueIsNonEmptyString, ValueIsNumber, ValueIsNumberInRange, ValueIsObject, ValueIsOneOf, ValueIsOrdinal, ValueIsPlainObject, ValueIsPromise, ValueIsRegExp, ValueIsScriptedFunction, ValueIsString, ValueIsStringMatching, ValueIsText, ValueIsTextline, ValueIsURL, ValueIsVanillaObject, ValuesAreEqual, ValuesDiffer, acceptNil, allowAnonymousFunction, allowArray, allowBoolean, allowCardinal, allowColor, allowDate, allowEMailAddress, allowError, allowFiniteNumber, allowFunction, allowInstanceOf, allowInteger, allowIntegerInRange, allowList, allowListSatisfying, allowNaN, allowNamedFunction, allowNativeFunction, allowNonEmptyString, allowNumber, allowNumberInRange, allowObject, allowOneOf, allowOrdinal, allowPlainObject, allowPromise, allowRegExp, allowScriptedFunction, allowString, allowStringMatching, allowText, allowTextline, allowURL, allowValueInheritingFrom, allowVanillaObject, allowedAnonymousFunction, allowedArray, allowedBoolean, allowedCardinal, allowedColor, allowedDate, allowedEMailAddress, allowedError, allowedFiniteNumber, allowedFunction, allowedInstanceOf, allowedInteger, allowedIntegerInRange, allowedList, allowedListSatisfying, allowedNaN, allowedNamedFunction, allowedNativeFunction, allowedNonEmptyString, allowedNumber, allowedNumberInRange, allowedObject, allowedOneOf, allowedOrdinal, allowedPlainObject, allowedPromise, allowedRegExp, allowedScriptedFunction, allowedString, allowedStringMatching, allowedText, allowedTextline, allowedURL, allowedValueInheritingFrom, allowedVanillaObject, constrained, escaped, expectAnonymousFunction, expectArray, expectBoolean, expectCardinal, expectColor, expectDate, expectEMailAddress, expectError, expectFiniteNumber, expectFunction, expectInstanceOf, expectInteger, expectIntegerInRange, expectList, expectListSatisfying, expectNaN, expectNamedFunction, expectNativeFunction, expectNonEmptyString, expectNumber, expectNumberInRange, expectObject, expectOneOf, expectOrdinal, expectPlainObject, expectPromise, expectRegExp, expectScriptedFunction, expectString, expectStringMatching, expectText, expectTextline, expectURL, expectValue, expectValueInheritingFrom, expectVanillaObject, expectedAnonymousFunction, expectedArray, expectedBoolean, expectedCardinal, expectedColor, expectedDate, expectedEMailAddress, expectedError, expectedFiniteNumber, expectedFunction, expectedInstanceOf, expectedInteger, expectedIntegerInRange, expectedList, expectedListSatisfying, expectedNaN, expectedNamedFunction, expectedNativeFunction, expectedNonEmptyString, expectedNumber, expectedNumberInRange, expectedObject, expectedOneOf, expectedOrdinal, expectedPlainObject, expectedPromise, expectedRegExp, expectedScriptedFunction, expectedString, expectedStringMatching, expectedText, expectedTextline, expectedURL, expectedValue, expectedValueInheritingFrom, expectedVanillaObject, global, quotable, quoted, rejectNil, shortHexColor, throwError, unescaped, validatedArgument };\n//# sourceMappingURL=javascript-interface-library.esm.js.map\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { ValueIsEMailAddress } from 'javascript-interface-library'\n\n  import {\n    focusOnApplication, actOnBehalfOfCustomer, changeCustomerEMailAddressTo\n  } from 'voltcloud-for-browsers'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  let EMailAddress:string, AddressLooksBad:boolean, AddressMessage:string\n\n  EMailAddress = $Globals.EMailAddress || ''\n\n  $: switch (true) {\n    case (EMailAddress.trim() === ''):\n      AddressLooksBad = true;  AddressMessage = 'please, enter your new email address'\n      break\n    case ValueIsEMailAddress(EMailAddress):\n      AddressLooksBad = false; AddressMessage = 'your new email address looks acceptable'\n      break\n    default:\n      AddressLooksBad = true;  AddressMessage = 'please, enter a valid email address'\n  }\n\n  $: ChangeIsForbidden = AddressLooksBad\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function changeEMailAddress () {\n    Globals.define('State','changingEMailAddress')\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await actOnBehalfOfCustomer($Globals.EMailAddress,$Globals.Password)\n      await changeCustomerEMailAddressTo(EMailAddress)\n    } catch (Signal) {\n      switch (Signal.name) {\n        case 'LoginFailed':\n        case 'BadToken':\n          return Globals.define({ loggedIn:false, State:'loggedOut' })\n        case 'ConflictError':\n          return Globals.define('State','EMailAddressChangeFailure')\n        default:\n          return Globals.define({\n            State:'CommunicationFailure', FailureReason:Signal.toString()\n          })\n      }\n    }\n\n    Globals.define({ EMailAddress, State:'EMailAddressChanged' })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">EMail Address Change</div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n\n    <input type=\"email\" bind:value={EMailAddress} placeholder=\"your new email address\">\n    <div class:Hint={true} class:invalid={AddressLooksBad}>{AddressMessage}</div>\n\n    <button disabled={ChangeIsForbidden} on:click|preventDefault={changeEMailAddress}>Change EMail Address</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice ()        { Globals.define('State','') }\n  function startRegistration ()  { Globals.define('State','Registration') }\n  function startPasswordReset () { Globals.define('State','ResetRequest') }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Login Failure</div>\n\n    <div class=\"Block\">\n      Your email address or your password may have been incorrect.\n    </div>\n\n    <div class=\"Block\">\n      If you have not yet applied for an account, just\n      <a href=\"#/\" on:click|preventDefault={startRegistration}>create one</a>!\n    </div>\n\n    <div class=\"Block\">\n      If you forgot your password, you may ask for a\n      <a href=\"#/\" on:click|preventDefault={startPasswordReset}>password reset</a>.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Logging in...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n\n  .Dialog > div > [name=\"UnconfirmedAccount\"] {\n    display:block; position:relative;\n    margin:10px 0px 5px 0px;\n    text-align:right;\n  }\n\n  .Dialog > div > [name=\"ForgottenPassword\"] {\n    display:block; position:relative;\n    margin:5px 0px 10px 0px;\n    text-align:right;\n  }\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { ValueIsEMailAddress } from 'javascript-interface-library'\n\n  import {\n    focusOnApplication, actOnBehalfOfCustomer, CustomerRecord\n  } from 'voltcloud-for-browsers'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  let EMailAddress:string, AddressLooksBad:boolean,  AddressMessage:string\n  let Password:string,     PasswordLooksBad:boolean, PasswordMessage:string\n\n  EMailAddress = $Globals.EMailAddress || ''\n  Password     = ''\n\n  $: switch (true) {\n    case (EMailAddress.trim() === ''):\n      AddressLooksBad = true;  AddressMessage = 'please, enter your email address'\n      break\n    case ValueIsEMailAddress(EMailAddress):\n      AddressLooksBad = false; AddressMessage = 'your email address looks acceptable'\n      break\n    default:\n      AddressLooksBad = true;  AddressMessage = 'please, enter a valid email address'\n  }\n\n  $: switch (true) {\n    case (Password === ''):\n      PasswordLooksBad = true;  PasswordMessage = 'please, enter your password'\n      break\n    case (Password.length < 10):\n      PasswordLooksBad = true;  PasswordMessage = 'your password is too short'\n      break\n    case ! /[0-9]/.test(Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any digits'\n      break\n    case (Password.toLowerCase() === Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any uppercase characters'\n      break\n    case (Password.toUpperCase() === Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any lowercase characters'\n      break\n    default:\n      PasswordLooksBad = false; PasswordMessage = 'your password looks acceptable'\n  }\n\n  $: LoginIsForbidden = AddressLooksBad || PasswordLooksBad\n\n  function closeDialog ()         { Globals.define('State','') }\n  function startRegistration ()   { Globals.define('State','Registration') }\n  function startRenewalRequest () { Globals.define('State','RenewalRequest') }\n  function startPasswordReset ()  { Globals.define('State','ResetRequest') }\n\n  async function doLogin () {\n    Globals.define({ State:'sendingLogin', EMailAddress, Password })\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await actOnBehalfOfCustomer(EMailAddress,Password)\n    } catch (Signal) {\n      if (Signal.name === 'LoginFailed') {\n        Globals.define('State','LoginFailure')\n      } else {\n        Globals.define({ State:'CommunicationFailure', FailureReason:Signal.toString() })\n      }\n      return\n    }\n\n    try {\n      let CustomerInfo = await CustomerRecord()\n      Globals.define({\n        firstName:CustomerInfo.first_name || '',\n        lastName: CustomerInfo.last_name  || ''\n      })\n    } catch (Signal) {\n      console.error('could not retrieve CustomerRecord',Signal)\n    }\n\n    Globals.define({ loggedIn:true, State:'' })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n    <div name=\"Title\">Login</div>\n\n    <input type=\"email\" bind:value={EMailAddress} placeholder=\"your email address\">\n    <div class:Hint={true} class:invalid={AddressLooksBad}>{AddressMessage}</div>\n\n    <input type=\"password\" bind:value={Password} placeholder=\"your password\">\n    <div class:Hint={true} class:invalid={PasswordLooksBad}>{PasswordMessage}</div>\n\n    <div name=\"UnconfirmedAccount\"><a href=\"#/\" on:click|preventDefault={startRenewalRequest}>Did not confirm your account?</a></div>\n    <div name=\"ForgottenPassword\" ><a href=\"#/\" on:click|preventDefault={startPasswordReset}>Forgot your password?</a></div>\n\n    <button disabled={LoginIsForbidden} on:click|preventDefault={doLogin}>Login</button>\n\n    <div style=\"text-align:center\">\n      Don't have an account? <a href=\"#/\" on:click|preventDefault={startRegistration}>Create one!</a>\n    </div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','Login')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password Reset</div>\n\n    <div class=\"Block\">\n      Your password has been successfully reset - you may login now.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password is being reset...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n\n  import {\n    focusOnApplication, actOnBehalfOfCustomer, resetCustomerPasswordUsing\n  } from 'voltcloud-for-browsers'\n</script>\n\n<script lang=\"ts\">\n  let Password:string,     PasswordLooksBad:boolean,     PasswordMessage:string\n  let Confirmation:string, ConfirmationLooksBad:boolean, ConfirmationMessage:string\n\n  Password = Confirmation = ''\n\n  $: switch (true) {\n    case (Password === ''):\n      PasswordLooksBad = true;  PasswordMessage = 'please, enter your password'\n      break\n    case (Password.length < 10):\n      PasswordLooksBad = true;  PasswordMessage = 'your password is too short'\n      break\n    case ! /[0-9]/.test(Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any digits'\n      break\n    case (Password.toLowerCase() === Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any uppercase characters'\n      break\n    case (Password.toUpperCase() === Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any lowercase characters'\n      break\n    default:\n      PasswordLooksBad = false; PasswordMessage = 'your password looks acceptable'\n  }\n\n  $: switch (true) {\n    case (Confirmation === ''):\n      ConfirmationLooksBad = true;  ConfirmationMessage = 'please, enter your new password again'\n      break\n    case (Confirmation !== Password):\n      ConfirmationLooksBad = true;  ConfirmationMessage = 'password differs from confirmation'\n      break\n    default:\n      ConfirmationLooksBad = false; ConfirmationMessage = 'password and confirmation are equal'\n  }\n\n  $: ResetIsForbidden = PasswordLooksBad || ConfirmationLooksBad\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function resetPassword () {\n    Globals.define('State','resettingPassword')\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await resetCustomerPasswordUsing($Globals.ResetToken, Password)\n    } catch (Signal) {\n      Globals.define({ State:'CommunicationFailure', FailureReason:Signal.toString() })\n      return\n    }\n\n    Globals.define({ ResetToken:'', Password, State:'PasswordReset' })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password Reset</div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n\n    <div class=\"Block\">\n      You may now define a new password.\n    </div>\n\n    <div class=\"Block\">\n      Warning: if you set a different password than before, you will loose\n      all your existing data!\n    </div>\n\n    <input type=\"password\" bind:value={Password} placeholder=\"your new password\">\n    <div class:Hint={true} class:invalid={PasswordLooksBad}>{PasswordMessage}</div>\n\n    <input type=\"password\" bind:value={Confirmation} placeholder=\"confirm your new password\">\n    <div class:Hint={true} class:invalid={ConfirmationLooksBad}>{ConfirmationMessage}</div>\n\n    <button disabled={ResetIsForbidden} on:click|preventDefault={resetPassword}>Reset Password</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Password Reset Requested</div>\n\n    <div class=\"Block\">\n      An email containing a link to reset your password has been sent.\n    </div>\n\n    <div class=\"Block\">\n      Please, open your mailbox, look for an email from VoltCloud.io and click\n      on the link it contains. You will then be asked to enter a new password.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Requesting Password Reset...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { ValueIsEMailAddress } from 'javascript-interface-library'\n\n  import {\n    focusOnApplication, startPasswordResetForCustomer\n  } from 'voltcloud-for-browsers'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  let EMailAddress:string, AddressLooksBad:boolean, AddressMessage:string\n\n  EMailAddress = $Globals.EMailAddress || ''\n\n  $: switch (true) {\n    case (EMailAddress.trim() === ''):\n      AddressLooksBad = true;  AddressMessage = 'please, enter your email address'\n      break\n    case ValueIsEMailAddress(EMailAddress):\n      AddressLooksBad = false; AddressMessage = 'your email address looks acceptable'\n      break\n    default:\n      AddressLooksBad = true;  AddressMessage = 'please, enter a valid email address'\n  }\n\n  $: SubmitIsForbidden = AddressLooksBad\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function submitRequest () {\n    Globals.define({ State:'requestingReset' })\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await startPasswordResetForCustomer(EMailAddress)\n    } catch (Signal) {\n      Globals.define({ State:'CommunicationFailure', FailureReason:Signal.toString() })\n      return\n    }\n\n    Globals.define({ State:'ResetRequested' })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n    <div name=\"Title\">Request Password Reset</div>\n\n    <div class=\"Block\">\n      If you forgot your password, you may ask for an email containing a link\n      which will allow you to define a new password.\n    </div>\n\n    <div class=\"Block\">\n      That email will be sent immediately after submitting this request, the\n      link it contains will be valid for one hour.\n    </div>\n\n    <div class=\"Block\">\n      Warning: if you set a different password than before, you will loose\n      all your existing data!\n    </div>\n\n    <input type=\"email\" bind:value={EMailAddress} placeholder=\"your email address\">\n    <div class:Hint={true} class:invalid={AddressLooksBad}>{AddressMessage}</div>\n\n    <button name=\"SubmitButton\" disabled={SubmitIsForbidden} on:click|preventDefault={submitRequest}>Request Password Reset</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','Login')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Account Confirmed</div>\n\n    <div class=\"Block\">\n      Your account has been successfully confirmed. You may login now.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Confirming Account...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Confirmation Message Sent</div>\n\n    <div class=\"Block\">\n      Another confirmation message has been sent to the given email address.\n    </div>\n\n    <div class=\"Block\">\n      Please, open your mailbox, look for an email from VoltCloud.io and click\n      on the link it contains. This will automatically confirm your account.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Sending another Confirmation Message...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { ValueIsEMailAddress } from 'javascript-interface-library'\n\n  import {\n    focusOnApplication, resendConfirmationEMailToCustomer\n  } from 'voltcloud-for-browsers'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  let EMailAddress:string, AddressLooksBad:boolean, AddressMessage:string\n\n  EMailAddress = $Globals.EMailAddress || ''\n\n  $: switch (true) {\n    case (EMailAddress.trim() === ''):\n      AddressLooksBad = true;  AddressMessage = 'please, enter your email address'\n      break\n    case ValueIsEMailAddress(EMailAddress):\n      AddressLooksBad = false; AddressMessage = 'your email address looks acceptable'\n      break\n    default:\n      AddressLooksBad = true;  AddressMessage = 'please, enter a valid email address'\n  }\n\n  $: SubmitIsForbidden = AddressLooksBad\n\n  function closeDialog () {\n    Globals.define('State','')\n  }\n\n  async function submitRequest () {\n    Globals.define({ State:'renewing' })\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await resendConfirmationEMailToCustomer(EMailAddress)\n    } catch (Signal) {\n      Globals.define({ State:'CommunicationFailure', FailureReason:Signal.toString() })\n      return\n    }\n\n    Globals.define({ State:'renewed' })\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n    <div name=\"Title\">Resend Confirmation Message</div>\n\n    <div class=\"Block\">\n      Your account has been created, but not yet confirmed. If necessary, you\n      may request another confirmation email to be sent to your address.\n    </div>\n\n    <div class=\"Block\">\n      That email will be sent immediately after submitting this request, the\n      link it contains will be valid for twelve hours.\n    </div>\n\n    <input type=\"email\" bind:value={EMailAddress} placeholder=\"your email address\">\n    <div class:Hint={true} class:invalid={AddressLooksBad}>{AddressMessage}</div>\n\n    <button name=\"SubmitButton\" disabled={SubmitIsForbidden} on:click|preventDefault={submitRequest}>Resend Confirmation Message</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','Registration')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Account Creation Failed</div>\n\n    <div class=\"Block\">\n      Your account could not be created because the given email address is\n      currently used by somebody.\n    </div>\n\n    <div class=\"Block\">\n      Please try again with a different email address.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function closeNotice () {\n    Globals.define('State','')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Confirmation Message Sent</div>\n\n    <div class=\"Block\">\n      Your account has been successfully created and a confirmation message\n      sent to the given email address.\n    </div>\n\n    <div class=\"Block\">\n      Please, check your mailbox, look for an email from VoltCloud.io and click\n      on the link it contains in order to complete the registration process.\n    </div>\n\n    <div class=\"Block\">\n      If you will not confirm your email address within 12 hours, your account\n      will be removed again.\n    </div>\n\n    <button on:click|preventDefault={closeNotice}>Ok</button>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n</style>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"Title\">Creating Account...</div>\n  </div>\n</div>\n","<style>\n  .Dialog {\n    display:inline-block; flex:0 0 auto; position:relative;\n    width:300px; height:auto;\n    margin:0px; margin-top:-20px;\n    border:none; border-radius:8px;\n    padding:10px;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2);\n    background-color:white;\n  }\n\n  .Dialog > div {\n    display:flex; position:relative;\n    flex-flow:column nowrap; align-items:stretch;\n    border:solid 2px lightgray; border-radius:4px;\n    padding:10px;\n  }\n\n  .Dialog > div > [name=\"Title\"] {\n    display:block; position:relative;\n    padding:4px 0px 14px 0px;\n    font-size:18px; font-weight:bold;\n    text-align:center;\n    color:#222222;\n  }\n\n\n  .Dialog > div > [name=\"CloseButton\"] {\n    display:block; position:absolute;\n    top:-20px; right:-20px; width:20px; height:20px;\n    border:solid 2px white; border-radius:50%;\n    box-shadow:0px 0px 5px 5px rgba(0,0,0,0.2), 0px 0px 0px 1px lightgray;\n    background-color:black;\n    padding:0px;\n    font-size:18px; font-weight:bold; line-height:12px;\n    text-align:center;\n    color:white;\n    cursor:pointer;\n  }\n\n\n  .Dialog > div > .Block {\n    display:block; margin:0px 0px 10px 0px;\n    text-align:justify;\n  }\n\n\n  .Dialog a, .Dialog a:visited {\n    color:#2980B9;\n    text-decoration:underline;\n  }\n\n\n  .Dialog > div > input {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:4px;\n    border:solid 1px lightgray; border-radius:2px;\n    font-size:16px;\n  }\n\n  .Dialog > div .Hint {\n    display:inline-block; position:relative;\n    left:2px; top:-2px;\n    font-size:12px\n  }\n\n  .Dialog > div .invalid.Hint {\n    color:red;\n  }\n\n\n  .Dialog > div > button {\n    appearance:none; -webkit-appearance:none; -moz-appearance:none; -o-appearance:none;\n    display:block; position:relative;\n    margin:4px 0px 4px 0px; padding:6px;\n    background-color:#2980B9;\n    border:none; border-radius:4px;\n    font-size:16px; font-weight:bold; color:white;\n    cursor:pointer;\n  }\n\n  .Dialog > div > button:disabled {\n    opacity:0.3;\n    cursor:auto;\n  }\n\n\n\n  .Dialog > div > [name=\"LegalRow\"] {\n    display:block; position:relative;\n    padding-top:10px;\n    text-align:right;\n  }\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { ValueIsEMailAddress } from 'javascript-interface-library'\n\n  import {\n    focusOnApplication, focusOnNewCustomer\n  } from 'voltcloud-for-browsers'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  let EMailAddress:string, AddressLooksBad:boolean,      AddressMessage:string\n  let Password:string,     PasswordLooksBad:boolean,     PasswordMessage:string\n  let Confirmation:string, ConfirmationLooksBad:boolean, ConfirmationMessage:string\n  let DPSAgreementChecked:boolean, DPSAgreementMessage:string\n  let TOSAgreementChecked:boolean, TOSAgreementMessage:string\n\n  EMailAddress = $Globals.EMailAddress || ''\n  Password     = ''\n  DPSAgreementChecked = TOSAgreementChecked = false\n\n  $: switch (true) {\n    case (EMailAddress.trim() === ''):\n      AddressLooksBad = true;  AddressMessage = 'please, enter your email address'\n      break\n    case ValueIsEMailAddress(EMailAddress):\n      AddressLooksBad = false; AddressMessage = 'your email address looks acceptable'\n      break\n    default:\n      AddressLooksBad = true;  AddressMessage = 'please, enter a valid email address'\n  }\n\n  $: switch (true) {\n    case (Password === ''):\n      PasswordLooksBad = true;  PasswordMessage = 'please, enter your password'\n      break\n    case (Password.length < 10):\n      PasswordLooksBad = true;  PasswordMessage = 'your password is too short'\n      break\n    case ! /[0-9]/.test(Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any digits'\n      break\n    case (Password.toLowerCase() === Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any uppercase characters'\n      break\n    case (Password.toUpperCase() === Password):\n      PasswordLooksBad = true;  PasswordMessage = 'your password lacks any lowercase characters'\n      break\n    default:\n      PasswordLooksBad = false; PasswordMessage = 'your password looks acceptable'\n  }\n\n  $: switch (true) {\n    case (Confirmation === ''):\n      ConfirmationLooksBad = true;  ConfirmationMessage = 'please, enter your password again'\n      break\n    case (Confirmation !== Password):\n      ConfirmationLooksBad = true;  ConfirmationMessage = 'password and confirmation differ'\n      break\n    default:\n      ConfirmationLooksBad = false; ConfirmationMessage = 'password and confirmation are equal'\n  }\n\n  $: {\n    DPSAgreementMessage = (DPSAgreementChecked ? 'thank you' : 'please, agree to apply for an account')\n    TOSAgreementMessage = (TOSAgreementChecked ? 'thank you' : 'please, agree to apply for an account')\n  }\n\n  $: SubmitIsForbidden = (\n    AddressLooksBad || PasswordLooksBad || ConfirmationLooksBad ||\n    ! DPSAgreementChecked || ! TOSAgreementChecked\n  )\n\n  function closeDialog () { Globals.define('State','') }\n  function showLegal ()   { document.location.href = '#/Legal' }\n  function startLogin ()  { Globals.define('State','Login') }\n\n  async function createAccount () {\n    Globals.define({ State:'registering', EMailAddress, Password })\n\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await focusOnNewCustomer(EMailAddress,Password)\n    } catch (Signal) {\n      if (Signal.name === 'ConflictError') {\n        Globals.define('State','RegistrationFailed')\n      } else {\n        Globals.define({ State:'CommunicationFailure', FailureReason:Signal.toString() })\n      }\n      return\n    }\n\n    Globals.define('State','registered')\n  }\n</script>\n\n<div class=\"Dialog\">\n  <div>\n    <div name=\"CloseButton\" on:click|preventDefault={closeDialog}>&times;</div>\n    <div name=\"Title\">User Registration</div>\n\n    <input type=\"email\" bind:value={EMailAddress} placeholder=\"your email address\">\n    <div class:Hint={true} class:invalid={AddressLooksBad}>{AddressMessage}</div>\n\n    <div class=\"Block\">\n      Please note: GMX.de and Web.de currently need approx. 2 hours to deliver\n      confirmation messages, other providers should be much quicker.\n    </div>\n\n    <input type=\"password\" bind:value={Password} placeholder=\"your password\">\n    <div class:Hint={true} class:invalid={PasswordLooksBad}>{PasswordMessage}</div>\n\n    <input type=\"password\" bind:value={Confirmation} placeholder=\"confirm your password\">\n    <div class:Hint={true} class:invalid={ConfirmationLooksBad}>{ConfirmationMessage}</div>\n\n    <div name=\"LegalRow\">\n      <div>\n        Agreeing to <a href=\"#/\" on:click|preventDefault={showLegal}>Data Privacy Statement?</a>\n        <input type=\"checkbox\" bind:checked={DPSAgreementChecked}>\n      </div>\n      <div class:Hint={true} class:invalid={! DPSAgreementChecked}>{DPSAgreementMessage}</div>\n\n      <div>\n        Agreeing to <a href=\"https://www.appstudio.dev/app/legal/legal.php\">Terms of Service?</a>\n        <input type=\"checkbox\" bind:checked={TOSAgreementChecked}>\n      </div>\n      <div class:Hint={true} class:invalid={! TOSAgreementChecked}>{TOSAgreementMessage}</div>\n    </div>\n\n    <button disabled={SubmitIsForbidden} on:click|preventDefault={createAccount}>Create Account</button>\n\n    <div style=\"text-align:center\">\n      Already have an account? <a href=\"#/\" on:click|preventDefault={startLogin}>Log in!</a>\n    </div>\n  </div>\n</div>\n","<style>\n  .Overlay {\n    display:flex; flex-flow:column nowrap; justify-content:center; align-items:center;\n    position:absolute; left:0px; top:0px; width:100%; height:100%;\n    background-color:rgb(0,0,0,0.2);\n  }\n</style>\n\n<div class=\"Overlay\">\n  <slot></slot>\n</div>","<style>\n  .Page {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n    display:relative; width:100%; height:100%;\n  }\n\n  .NavigationBar {\n    display:flex; flex:0 0 auto;\n    width:100%; height:44px;\n    border:none; border-bottom:solid 1px black;\n    font-size:18px; font-weight:bold;\n  }\n\n  .NavigationBar .Button {\n    display:inline-block; position:absolute;\n    top:0px; width:auto; height:44px;\n    line-height:44px; color:#0080FF;\n    cursor:pointer;\n  }\n\n  .NavigationBar .left.Button  { left:10px;  text-align:left }\n  .NavigationBar .right.Button { right:10px; text-align:right }\n\n  .NavigationBar .Caret {\n    display:inline; position:relative;\n    top:0px; font-size:22px; font-weight:bold;\n  }\n\n  .NavigationBar .Title {\n    display:block; position:absolute;\n    width:100%; height:44px;\n    text-align:center; line-height:44px;\n    pointer-events:none;\n  }\n\n  .ContentArea {\n    display:block; position:relative; flex:1 1 auto; overflow:auto;\n  }\n\n  .TabStrip {\n    display:inline-flex; position:relative; overflow:hidden;\n    width:100%; height:52px;\n    border:none; border-top:solid 1px black;\n    padding:4px;\n    font-size:16px; line-height:22px; color:#0080FF;\n  }\n\n  .Tab {\n    display:inline-block; position:relative;\n    height:100%; width:25%;\n    text-align:center;\n    cursor:pointer;\n  }\n\n\n  .NavigationBar .Button[disabled=\"true\"] { opacity:0.3 }\n  .ContentArea > .Placeholder {\n    display:flex; flex-flow:column nowrap; justify-content:center;\n    position:absolute; left:0px; top:0px; right:0px; bottom:0px;\n    font-size:32px; font-weight:bold; color:rgba(0,0,0,0.1);\n    text-align:center; pointer-events:none;\n  }\n\n  .ContentArea > .Placeholder > span {\n    position:relative; top:-20px; pointer-events:none;\n  }\n\n  .ContentArea > textarea {\n    width:100%; height:auto; min-height:99%; resize:none;\n    background:transparent;\n    border:none; outline:none;\n    padding:4px;\n    font-family:inherit; font-size:inherit; font-weight:normal;\n  }\n\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { onMount } from 'svelte'\n\n  import {\n    focusOnApplication, actOnBehalfOfCustomer,\n    CustomerStorageEntry, setCustomerStorageEntryTo\n  } from 'voltcloud-for-browsers'\n\n  import { randomBytes, secretbox } from 'tweetnacl'\n  import { encode, decode }         from '@stablelib/base64'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function logout ()             { performAutoSave(); Globals.define({ loggedIn:false, State:'loggedOut' }) }\n  function changeEMailAddress () { performAutoSave(); Globals.define('State','EMailAddressChange') }\n  function changePassword ()     { performAutoSave(); Globals.define('State','PasswordChange') }\n  function changeName ()         { performAutoSave(); Globals.define('State','NameChange') }\n  function deleteAccount ()      { performAutoSave(); Globals.define('State','Unregistration') }\n\n  let DelayTimer:any, DelayLimitTimer:any\n\n  function triggerAutoSave () {\n    if (DelayTimer != null) { clearTimeout(DelayTimer) }\n    DelayTimer = setTimeout(performAutoSave, 1000)\n\n    if (DelayLimitTimer == null) {\n      DelayLimitTimer = setTimeout(() => {\n        if (isSaving) {\n          changedWhileSaving = true\n        } else {\n          performAutoSave()\n        }\n      }, 10000)\n    }\n  }\n\n\n  let isSaving:boolean           = false\n  let changedWhileSaving:boolean = false\n\n  async function performAutoSave () {\n    if (DelayTimer == null) { return }\n    if (isSaving)           { return }\n\n    clearTimeout(DelayTimer);      DelayTimer      = undefined\n    clearTimeout(DelayLimitTimer); DelayLimitTimer = undefined\n\n    if (isRefreshing) { return }\n\n    isSaving = true; changedWhileSaving = false\n      try {\n        await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n        await actOnBehalfOfCustomer($Globals.EMailAddress,$Globals.Password)\n        await setCustomerStorageEntryTo('NoteText',encrypted(NoteText))\n      } catch (Signal) {\n        isSaving = false\n\n        switch (Signal.name) {\n          case 'LoginFailed':\n          case 'BadToken':\n            return Globals.define({ loggedIn:false, State:'loggedOut' })\n          default:\n            return Globals.define({\n              State:'CommunicationFailure', FailureReason:Signal.toString()\n            })\n        }\n      }\n    isSaving = false\n\n    if (changedWhileSaving) { performAutoSave() } // for extremely slow networks\n  }\n\n\n  let isRefreshing:boolean  = false\n  let justRefreshed:boolean = false\n\n  async function performRefresh () {\n    if (isRefreshing) { return }\n\n    isRefreshing = true\n      if (DelayTimer      != null) { clearTimeout(DelayTimer);      DelayTimer      = undefined }\n      if (DelayLimitTimer != null) { clearTimeout(DelayLimitTimer); DelayLimitTimer = undefined }\n\n      try {\n        await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n        await actOnBehalfOfCustomer($Globals.EMailAddress,$Globals.Password)\n\n        let decryptedText = decrypted((await CustomerStorageEntry('NoteText')) || '')\n          if (decryptedText == null) {\n            isRefreshing = false\n            return Globals.define('State','DecryptionFailure')\n          }\n        NoteText = decryptedText\n\n        justRefreshed = true\n      } catch (Signal) {\n        isRefreshing = false\n\n        switch (Signal.name) {\n          case 'LoginFailed':\n          case 'BadToken':\n            return Globals.define({ loggedIn:false, State:'loggedOut' })\n          default:\n            return Globals.define({\n              State:'CommunicationFailure', FailureReason:Signal.toString()\n            })\n        }\n      }\n    isRefreshing = false\n  }\n\n\n  function encrypted (Text:string):string {\n// @ts-ignore $Globals.EncryptionKey *is* a Uint8Array\n    let EncryptionKey  = $Globals.EncryptionKey as Uint8Array     // after login\n    let Nonce          = randomBytes(secretbox.nonceLength)\n    let encryptedValue = secretbox((new TextEncoder()).encode(Text), Nonce, EncryptionKey)\n\n    let Result = new Uint8Array(Nonce.length + encryptedValue.length)\n      Result.set(Nonce)\n      Result.set(encryptedValue,Nonce.length)\n    return encode(Result)                                  // now Base64-encoded\n  }\n\n  function decrypted (Base64Value:string):string | undefined {\n    if (Base64Value === '') { return '' }\n\n// @ts-ignore $Globals.EncryptionKey *is* a Uint8Array\n    let EncryptionKey = $Globals.EncryptionKey as Uint8Array      // after login\n\n    let Buffer\n      try {\n        Buffer = decode(Base64Value)\n      } catch (Signal) {\n        console.error('Base64 decode failed',Signal)\n        return undefined\n      }\n\n      if (Buffer.length < secretbox.nonceLength) {\n        return undefined\n      }\n    let Nonce  = Buffer.slice(0,secretbox.nonceLength)\n    let decryptedValue = secretbox.open(\n      Buffer.slice(secretbox.nonceLength), Nonce, EncryptionKey\n    )\n    return (\n      decryptedValue == null\n      ? undefined\n      : (new TextDecoder()).decode(decryptedValue)\n    )\n  }\n\n\n\n  let NoteText:string = localStorage['vfb-notes: note-text'] || ''\n  justRefreshed = true                        // trick to avoid initial autosave\n  performRefresh()\n\n  $: {\n    localStorage['vfb-notes: note-text'] = NoteText\n    if (justRefreshed) { justRefreshed = false } else { triggerAutoSave() }\n  }\n\n  let Editor:HTMLElement // bug fix for some browsers which ignore \"height:auto\"\n  onMount(() => {\n    Editor.style.overflowY = 'hidden'\n\n    function setEditorHeight () {\n      let Height = Math.max(\n        (Editor.parentElement as HTMLElement).clientHeight-6, Editor.scrollHeight\n      )\n      Editor.style.height = Height + 'px'\n    }\n    setEditorHeight()\n\n    Editor.addEventListener('input',setEditorHeight)\n  })\n</script>\n\n<div class=\"Page\">\n  <div class=\"NavigationBar\">\n    <div class=\"left Button\" on:click|preventDefault={logout}><span class=\"Caret\">⟨</span> Logout</div>\n    <div class=\"Title\">VfB-Notes</div>\n    <div class=\"right Button\" disabled={isSaving || isRefreshing}\n      on:click|preventDefault={performRefresh}>Refresh</div>\n  </div>\n  <div class=\"ContentArea\" style=\"background-color:ivory\">\n    {#if NoteText === ''}\n      <div class=\"Placeholder\"><span>Enter your text here</span></div>\n    {/if}\n    <textarea bind:this={Editor} bind:value={NoteText}></textarea>\n  </div>\n  <div class=\"TabStrip\">\n    <div class=\"Tab\" on:click|preventDefault={changeEMailAddress}>Change<br>EMail</div>\n    <div class=\"Tab\" on:click|preventDefault={changePassword}    >Change<br>Password</div>\n    <div class=\"Tab\" on:click|preventDefault={changeName}        >Change<br>Name</div>\n    <div class=\"Tab\" on:click|preventDefault={deleteAccount}     >Delete<br>Account</div>\n  </div>\n\n  <slot></slot>\n</div>","<style>\n  .Page {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n    display:relative; width:100%; height:100%;\n  }\n\n  .NavigationBar {\n    display:flex; flex:0 0 auto;\n    width:100%; height:44px;\n    border:none; border-bottom:solid 1px black;\n    font-size:18px; font-weight:bold;\n  }\n\n  .NavigationBar .Button {\n    display:inline-block; position:absolute;\n    top:0px; width:auto; height:44px;\n    line-height:44px; color:#0080FF;\n    cursor:pointer;\n  }\n\n  .NavigationBar .left.Button  { left:10px;  text-align:left }\n  .NavigationBar .right.Button { right:10px; text-align:right }\n\n  .NavigationBar .Caret {\n    display:inline; position:relative;\n    top:0px; font-size:22px; font-weight:bold;\n  }\n\n  .NavigationBar .Title {\n    display:block; position:absolute;\n    width:100%; height:44px;\n    text-align:center; line-height:44px;\n    pointer-events:none;\n  }\n\n  .ContentArea {\n    display:block; position:relative; flex:1 1 auto; overflow:auto;\n  }\n\n  .TabStrip {\n    display:inline-flex; position:relative; overflow:hidden;\n    width:100%; height:52px;\n    border:none; border-top:solid 1px black;\n    padding:4px;\n    font-size:18px; line-height:22px; color:#0080FF;\n  }\n\n  .Tab {\n    display:inline-block; position:relative;\n    height:100%; width:25%;\n    text-align:center;\n    cursor:pointer;\n  }\n\n\n\n  .ContentArea .Block {\n    display:block; margin:20px;\n    text-align:justify;\n  }\n\n  .ContentArea .Block ul {\n    margin-left:20px; padding-left:0px;\n  }\n\n  .ContentArea .Block ul ul {\n    margin-left:10px; padding-left:0px;\n  }\n</style>\n\n<script lang=\"ts\">\n  function showInfo () { document.location.hash = '#/' }\n</script>\n\n<div class=\"Page\">\n  <div class=\"NavigationBar\">\n    <div class=\"left Button\" on:click|preventDefault={showInfo}><span class=\"Caret\">⟨</span> Back</div>\n    <div class=\"Title\">VfB-Notes - Legal</div>\n    <div class=\"right Button\"/>\n  </div>\n  <div class=\"ContentArea\">\n    <div class=\"Block\">\n      \"VfB-Notes\" is a simple application hosted at and using additional\n      services offered by <a href=\"https://voltcloud.io/\">VoltCloud.io</a>.\n      As a consequence, at first, the VoltCloud\n      <a href=\"https://www.appstudio.dev/app/legal/legal.php\">Privacy Policy</a>\n      and\n      <a href=\"https://www.appstudio.dev/app/legal/legal.php\">Terms of Service</a>\n      apply.\n    </div>\n\n    <div class=\"Block\">\n      <h4>Logging</h4>\n\n      \"VfB-Notes\" itself does not perform any logging.\n    </div>\n\n    <div class=\"Block\">\n      <h4>Cookies and other Data stored in a Browser</h4>\n\n      \"VfB-Notes\" does not use cookies. It does, however, store some information\n      locally in the browser used to execute this web application, as there are:\n\n      <ul>\n        <li>stored permanently (until deletion):\n          <ul>\n            <li>your email address</li>\n          </ul>\n        </li>\n        <li>stored during a single \"session\" only:\n          <ul>\n            <li>your password (for automatic token refresh)</li>\n            <li>your current VoltCloud access token</li>\n          </ul>\n        </li>\n      </ul>\n\n      A \"session\" belongs to a single browser window (or tab). It starts when\n      you first navigate to \"VfB-Notes\" and ends when that browser window (or\n      tab, resp.) is closed.\n      <br>&nbsp;<br>\n      Finishing a \"session\" automatically deletes any session-related data\n      (i.e., access token and password)\n    </div>\n\n    <div class=\"Block\">\n      <h4>Data Privacy</h4>\n\n      The developer of this application has insight into\n\n      <ul>\n        <li>\n          your account, which was created to use this application\n          (including your email address, your first and last name and wether\n          your account has been confirmed or not)\n          <br>&nbsp;<br>\n          <i>The developer will never use this knowledge to send you unrequested\n          messages nor will he disclose that information to other parties!</i>\n          <br>&nbsp;<br>\n        </li>\n        <li>\n          the notes you create\n          <br>&nbsp;<br>\n          <i>For that reason, \"VfB-Notes\" always encrypts your notes using your\n          password. Please note: your notes will become unreadable if you\n          change your password using the VoltCloud \"password reset\" mechanism!</i>\n        </li>\n      </ul>\n\n      The developer does <b>not</b> know your password, nor is he able to\n      decrypt the notes you create.\n    </div>\n\n    <div class=\"Block\">\n      <h4>Data Removal</h4>\n\n      As soon as you delete your account, all information about you (including\n      any notes you created) will immediately become inaccessible for the\n      developer - and will eventually be removed from VoltCloud in the course\n      of their processes.\n    </div>\n  </div>\n</div>","<style>\n  .Page {\n    display:flex; flex-flow:column nowrap; align-items:stretch;\n    display:relative; width:100%; height:100%;\n  }\n\n  .NavigationBar {\n    display:flex; flex:0 0 auto;\n    width:100%; height:44px;\n    border:none; border-bottom:solid 1px black;\n    font-size:18px; font-weight:bold;\n  }\n\n  .NavigationBar .Button {\n    display:inline-block; position:absolute;\n    top:0px; width:auto; height:44px;\n    line-height:44px; color:#0080FF;\n    cursor:pointer;\n  }\n\n  .NavigationBar .left.Button  { left:10px;  text-align:left }\n  .NavigationBar .right.Button { right:10px; text-align:right }\n\n  .NavigationBar .Caret {\n    display:inline; position:relative;\n    top:0px; font-size:22px; font-weight:bold;\n  }\n\n  .NavigationBar .Title {\n    display:block; position:absolute;\n    width:100%; height:44px;\n    text-align:center; line-height:44px;\n    pointer-events:none;\n  }\n\n  .ContentArea {\n    display:block; position:relative; flex:1 1 auto; overflow:auto;\n  }\n\n  .TabStrip {\n    display:inline-flex; position:relative; overflow:hidden;\n    width:100%; height:52px;\n    border:none; border-top:solid 1px black;\n    padding:4px;\n    font-size:16px; line-height:22px; color:#0080FF;\n  }\n\n  .Tab {\n    display:inline-block; position:relative;\n    height:100%; width:25%;\n    text-align:center;\n    cursor:pointer;\n  }\n\n\n\n  .ContentArea .Block {\n    display:block; margin:20px;\n    text-align:justify;\n  }\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  function showLegal ()          { document.location.href = '#/Legal' }\n  function createAccount ()      { Globals.define('State','Registration') }\n  function resendConfirmation () { Globals.define('State','RenewalRequest') }\n  function resetPassword ()      { Globals.define('State','ResetRequest') }\n  function startLogin ()         { Globals.define('State','Login') }\n</script>\n\n<div class=\"Page\">\n  <div class=\"NavigationBar\">\n    <div class=\"left Button\"  on:click|preventDefault={showLegal}>Legal Info</div>\n    <div class=\"Title\">VfB-Notes</div>\n    <div class=\"right Button\" on:click|preventDefault={startLogin}>Login <span class=\"Caret\">⟩</span></div>\n  </div>\n  <div class=\"ContentArea\">\n    <div class=\"Block\">\n      \"VfB-Notes\" is a trivial demonstrator for the\n      <a href=\"https://github.com/rozek/voltcloud-for-browsers\">voltcloud-for-browsers</a>\n      library.\n    </div>\n    <div class=\"Block\">\n      <a href=\"https://voltcloud.io/\">VoltCloud.io</a> is a simple (and\n      reasonably priced) deployment server for web applications with integrated\n      user management and key-value stores for both the application itself and\n      any of its users.\n    </div>\n    <div class=\"Block\">\n      <a href=\"https://github.com/rozek/voltcloud-for-browsers\">voltcloud-for-browsers</a>\n      is a simple client library for web applications which need access to\n      VoltCloud and its functions.\n    </div>\n    <div class=\"Block\">\n      This demonstrator implements all user management processes VoltCloud\n      offers - ranging from user registration, email confirmation, password\n      reset up to user login, account management and, last not least, account\n      deletion.\n    </div>\n    <div class=\"Block\">\n      The service this application provides is, on the other hand, rather\n      trivial: registered users will be able to edit a single page of online\n      text notes from their smartphones (or tablets, desktops or notebooks)\n    </div>\n    <div class=\"Block\">\n      This \"service\" is provided free of charge on a \"best-effort\" basis.\n    </div>\n    <div class=\"Block\">\n      Please, consider the <a href=\"#/\" on:click|preventDefault={showLegal}>Data Privacy\n      Statement</a> for this little application and VoltCloud's\n      <a href=\"https://www.appstudio.dev/app/legal/legal.php\">Terms of Service</a>\n      before applying for an account.\n    </div>\n  </div>\n  <div class=\"TabStrip\">\n    <div class=\"Tab\" on:click|preventDefault={createAccount}     >Create<br>Account</div>\n    <div class=\"Tab\" on:click|preventDefault={resendConfirmation}>Resend<br>Confirmation</div>\n    <div class=\"Tab\" on:click|preventDefault={resetPassword}     >Reset<br>Password</div>\n    <div class=\"Tab\" on:click|preventDefault={startLogin}        >Start<br>Login</div>\n  </div>\n\n  <slot></slot>\n</div>","//----------------------------------------------------------------------------//\n//                            Svelte Viewport Info                            //\n//----------------------------------------------------------------------------//\nvar MediaMatcher = (window.matchMedia ||\n    // @ts-ignore\n    window['webkitMatchmedia'] || window['mozMatchmedia'] || window['oMatchmedia']);\nfunction MediaQuery(query) {\n    return (MediaMatcher != null) && MediaMatcher(query).matches;\n}\nfunction DocumentIsReady() {\n    return ((document.readyState === 'interactive') ||\n        (document.readyState === 'complete'));\n}\n/**** determineViewportSize ****/\n// Internet Explorer and MS/Edge are NOT supported\nvar ViewportWidth = 0; // given in px, explicit initialization...\nvar ViewportHeight = 0; // ...is needed to satisfy the compiler\nfunction determineViewportSize() {\n    ViewportWidth = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n    ViewportHeight = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n}\n// see https://stackoverflow.com/questions/1248081/get-the-browser-viewport-dimensions-with-javascript\ndetermineViewportSize();\nvar ScreenOrientation = undefined;\nvar detailledScreenOrientation = undefined;\n// explicit initialization is needed to satisfy compiler\nfunction determineScreenOrientation() {\n    var Orientation;\n    if ('orientation' in window.Screen) {\n        Orientation = window.screen.orientation.type;\n    }\n    switch (Orientation) {\n        case 'portrait-primary':\n        case 'portrait-secondary':\n            ScreenOrientation = 'portrait';\n            detailledScreenOrientation = Orientation;\n            break;\n        case 'landscape-primary':\n        case 'landscape-secondary':\n            ScreenOrientation = 'landscape';\n            detailledScreenOrientation = Orientation;\n            break;\n        default:\n            switch (true) {\n                case MediaQuery('(orientation:portrait)'):\n                    ScreenOrientation = 'portrait';\n                    break;\n                case MediaQuery('(orientation:landscape)'):\n                case ViewportWidth > ViewportHeight:\n                    ScreenOrientation = 'landscape';\n                    break;\n                default: ScreenOrientation = 'portrait';\n            }\n            detailledScreenOrientation = undefined;\n    }\n    if (DocumentIsReady()) {\n        document.body.classList.remove('Portrait', 'Landscape', 'Portrait-primary', 'Portrait-secondary', 'Landscape-primary', 'Landscape-secondary');\n        switch (ScreenOrientation) {\n            case 'portrait':\n                document.body.classList.add('Portrait');\n                break;\n            case 'landscape':\n                document.body.classList.add('Landscape');\n                break;\n        }\n        if (detailledScreenOrientation != null) {\n            var capitalized = function (Name) { return Name[0].toUpperCase() + Name.slice(1); };\n            document.body.classList.add(capitalized(detailledScreenOrientation));\n        }\n    }\n}\ndetermineScreenOrientation();\nif (!DocumentIsReady()) {\n    window.addEventListener('DOMContentLoaded', determineScreenOrientation);\n} // after document is loaded, classes will be applied as foreseen\n/**** handle problem that \"orientationchange\" is fired too soon ****/\nvar oldViewportWidth = ViewportWidth;\nvar oldViewportHeight = ViewportHeight;\nvar oldScreenOrientation = ScreenOrientation;\nvar oldDetailledScreenOrientation = detailledScreenOrientation;\nfunction rememberSettings() {\n    oldViewportWidth = ViewportWidth;\n    oldViewportHeight = ViewportHeight;\n    oldScreenOrientation = ScreenOrientation;\n    oldDetailledScreenOrientation = detailledScreenOrientation;\n}\nfunction submitEvents() {\n    if (!DocumentIsReady()) {\n        return;\n    }\n    if ((oldViewportWidth !== ViewportWidth) || (oldViewportHeight !== ViewportHeight)) {\n        document.body.dispatchEvent(new Event('viewportchanged', { bubbles: true, cancelable: true }));\n    }\n    if ((oldScreenOrientation !== ScreenOrientation) ||\n        (oldDetailledScreenOrientation !== detailledScreenOrientation)) {\n        document.body.dispatchEvent(new Event('orientationchangeend', { bubbles: true, cancelable: true }));\n    }\n}\nvar Poller; // right now, it's difficult to determine the proper type\nvar PollCounter = 0;\nvar PollCounterLimit = 10; // i.e., stop polling after 1000ms\nfunction stopPolling() {\n    clearInterval(Poller);\n    Poller = undefined;\n    PollCounter = 0;\n}\nfunction pollForViewportAfterOrientationChange() {\n    Poller = setInterval(function () {\n        determineViewportSize();\n        if ( // no update of screen size yet? => continue polling\n        (oldViewportWidth === ViewportWidth) &&\n            (oldViewportHeight === ViewportHeight)) {\n            PollCounter += 1;\n            if (PollCounter <= PollCounterLimit) {\n                return;\n            }\n        } // nota bene: sometimes viewport does not change (e.g., in iframe)\n        stopPolling();\n        determineScreenOrientation(); // uses ViewportWidth/Height as fallback\n        submitEvents();\n        rememberSettings();\n    }, 100);\n}\n/**** handler for \"orientationchange\" event ****/\nfunction determineViewportSizeAndScreenOrientation() {\n    determineViewportSize();\n    determineScreenOrientation(); // uses screen_width/height as final fallback\n    if (Poller != null) { // we are still polling because of former event\n        stopPolling();\n        submitEvents();\n        rememberSettings();\n    }\n    if ((oldViewportWidth === ViewportWidth) &&\n        (oldViewportHeight === ViewportHeight)) { // screen size did not (yet) change => start polling for change\n        pollForViewportAfterOrientationChange();\n    }\n    else { // viewport size changed in time => do not poll\n        submitEvents();\n        rememberSettings();\n    }\n}\n// see https://github.com/gajus/orientationchangeend\n/**** update on changes ****/\nwindow.addEventListener('orientationchange', function () {\n    setTimeout(determineViewportSizeAndScreenOrientation, 10);\n}); // seen on iOS 12: \"orientationchange\" fired before orientation is updated\nwindow.addEventListener('resize', determineViewportSizeAndScreenOrientation);\nif ('orientation' in screen) {\n    screen.orientation.addEventListener('change', function () {\n        setTimeout(determineViewportSizeAndScreenOrientation, 10);\n    });\n}\nvar svelteViewportInfo = {\n    get Width() { return ViewportWidth; },\n    get Height() { return ViewportHeight; },\n    get Orientation() { return ScreenOrientation; },\n    get detailledOrientation() { return detailledScreenOrientation; },\n};\n\nexport default svelteViewportInfo;\n//# sourceMappingURL=svelte-viewport-info.esm.js.map\n","<style>\n  .ApplicationCell {\n    display:block; position:absolute; overflow:hidden;\n    width:320px; height:480px;\n    margin:0px; padding:0px;\n    border:solid 8px black; border-radius:20px;\n    box-shadow:0px 0px 16px 0px rgba(0,0,0,0.5);\n    background:white;\n\n    font-family:'Source Sans Pro','Helvetica Neue',Helvetica,Arial,sans-serif;\n    font-size:14px; font-weight:400; color:black;\n    line-height:150%;\n  }\n\n  .isFullScreen {\n    border:none; border-radius:0px;\n  }\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import { constrained } from 'javascript-interface-library'\n  import    Viewport     from 'svelte-viewport-info'\n</script>\n\n<script lang=\"ts\">\n  let CellX = 0, CellWidth  = 320\n  let CellY = 0, CellHeight = 480\n\n  let isFullScreen = false\n\n  function resizeApplicationCell () {\n    let ViewportWidth  = Viewport.Width\n    let ViewportHeight = Viewport.Height\n\n    CellWidth  = constrained(ViewportWidth,  320,480)\n    CellHeight = constrained(ViewportHeight, 480,896)\n\n    CellX = Math.max(0, (ViewportWidth-CellWidth)/2)\n    CellY = Math.max(0,(ViewportHeight-CellHeight)/2)\n\n    isFullScreen = (\n      (ViewportWidth  >= 320) && (ViewportWidth  <= 480) &&\n      (ViewportHeight >= 480) && (ViewportHeight <= 896)\n    )\n  }\n  resizeApplicationCell()\n</script>\n\n<svelte:body\n  on:viewportchanged={resizeApplicationCell}\n  on:orientationchangeend={resizeApplicationCell}\n/>\n\n<div class=\"ApplicationCell\" class:isFullScreen style=\"\n  left:{CellX}px; top:{CellY}px;\n  width:{CellWidth}px; height:{CellHeight}px;\n\">\n  <slot></slot>\n</div>\n","<style>\n  :global(*) {\n    -moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;\n  }\n</style>\n\n<script context=\"module\" lang=\"ts\">\n  import {\n    focusOnApplication, confirmCustomerUsing\n  } from 'voltcloud-for-browsers'\n\n  import ApplicationCell             from './ApplicationCell.svelte'\n  import InfoPage                    from './InfoPage.svelte'\n  import LegalPage                   from './LegalPage.svelte'\n  import NotePage                    from './NotePage.svelte'\n  import Overlay                     from './Overlay.svelte'\n  import RegistrationDialog          from './RegistrationDialog.svelte'\n  import RegistrationNotice          from './RegistrationNotice.svelte'\n  import RegistrationSuccessNotice   from './RegistrationSuccessNotice.svelte'\n  import RegistrationFailureNotice   from './RegistrationFailureNotice.svelte'\n  import RenewalDialog               from './RenewalDialog.svelte'\n  import RenewalNotice               from './RenewalNotice.svelte'\n  import RenewedNotice               from './RenewedNotice.svelte'\n  import ConfirmationNotice          from './ConfirmationNotice.svelte'\n  import ConfirmedNotice             from './ConfirmedNotice.svelte'\n  import ResetRequestDialog          from './ResetRequestDialog.svelte'\n  import ResetRequestNotice          from './ResetRequestNotice.svelte'\n  import ResetRequestedNotice        from './ResetRequestedNotice.svelte'\n  import PasswordResetDialog         from './PasswordResetDialog.svelte'\n  import PasswordResetNotice         from './PasswordResetNotice.svelte'\n  import PasswordResetSuccessNotice  from './PasswordResetSuccessNotice.svelte'\n  import LoginDialog                 from './LoginDialog.svelte'\n  import LoginNotice                 from './LoginNotice.svelte'\n  import LoginFailureNotice          from './LoginFailureNotice.svelte'\n  import EMailChangeDialog           from './EMailChangeDialog.svelte'\n  import EMailChangeNotice           from './EMailChangeNotice.svelte'\n  import EMailChangedNotice          from './EMailChangedNotice.svelte'\n  import EMailChangeFailureNotice    from './EMailChangeFailureNotice.svelte'\n  import PasswordChangeDialog        from './PasswordChangeDialog.svelte'\n  import PasswordChangeNotice        from './PasswordChangeNotice.svelte'\n  import PasswordChangedNotice       from './PasswordChangedNotice.svelte'\n  import PasswordChangeFailureNotice from './PasswordChangeFailureNotice.svelte'\n  import NameChangeDialog            from './NameChangeDialog.svelte'\n  import NameChangeNotice            from './NameChangeNotice.svelte'\n  import NameChangedNotice           from './NameChangedNotice.svelte'\n  import LogoutNotice                from './LogoutNotice.svelte'\n  import UnregistrationDialog        from './UnregistrationDialog.svelte'\n  import UnregistrationNotice        from './UnregistrationNotice.svelte'\n  import UnregisteredNotice          from './UnregisteredNotice.svelte'\n  import CommunicationFailureNotice  from './CommunicationFailureNotice.svelte'\n  import MultiInstanceNotice         from './MultiInstanceNotice.svelte'\n  import DecryptionFailureNotice     from './DecryptionFailureNotice.svelte'\n  import ReencryptionFailureNotice   from './ReencryptionFailureNotice.svelte'\n\n  import { Globals } from './Globals.js'\n</script>\n\n<script lang=\"ts\">\n  let completeURL = document.location.href\n  switch (true) {\n    case (completeURL.indexOf('/#/confirm/') > 0):\n      Globals.define({\n        ConfirmationToken:completeURL.replace(/^.*\\/\\#\\/confirm\\//,''),\n        State:'confirming'\n      })\n      confirmAccount()\n      break\n    case (completeURL.indexOf('/#/reset/') > 0):\n      Globals.define({\n        ResetToken:completeURL.replace(/^.*\\/\\#\\/reset\\//,''),\n        State:'ResetPassword'\n      })\n  }\n\n  async function confirmAccount () {\n    try {\n      await focusOnApplication($Globals.ApplicationURL,$Globals.ApplicationId)\n      await confirmCustomerUsing($Globals.ConfirmationToken)\n    } catch (Signal) {\n      Globals.define({ State:'CommunicationFailure', FailureReason:Signal.toString() })\n      return\n    }\n\n    Globals.define({ ConfirmationToken:'', State:'confirmed' })\n  }\n\n  let SubPath = document.location.hash\n  window.addEventListener(\n    'hashchange', () => { SubPath = document.location.hash }\n  )\n</script>\n\n<svelte:window on:storage={() => Globals.define('State','multipleInstances')}/>\n\n<ApplicationCell>\n  {#if $Globals.loggedIn}\n    <NotePage>\n      {#if $Globals.State === 'EMailAddressChange'}        <Overlay><EMailChangeDialog/></Overlay>{/if}\n      {#if $Globals.State === 'changingEMailAddress'}      <Overlay><EMailChangeNotice/></Overlay>{/if}\n      {#if $Globals.State === 'EMailAddressChanged'}       <Overlay><EMailChangedNotice/></Overlay>{/if}\n      {#if $Globals.State === 'EMailAddressChangeFailure'} <Overlay><EMailChangeFailureNotice/></Overlay>{/if}\n      {#if $Globals.State === 'PasswordChange'}            <Overlay><PasswordChangeDialog/></Overlay>{/if}\n      {#if $Globals.State === 'changingPassword'}          <Overlay><PasswordChangeNotice/></Overlay>{/if}\n      {#if $Globals.State === 'PasswordChanged'}           <Overlay><PasswordChangedNotice/></Overlay>{/if}\n      {#if $Globals.State === 'wrongPassword'}             <Overlay><PasswordChangeFailureNotice/></Overlay>{/if}\n      {#if $Globals.State === 'NameChange'}                <Overlay><NameChangeDialog/></Overlay>{/if}\n      {#if $Globals.State === 'changingName'}              <Overlay><NameChangeNotice/></Overlay>{/if}\n      {#if $Globals.State === 'NameChanged'}               <Overlay><NameChangedNotice/></Overlay>{/if}\n      {#if $Globals.State === 'Unregistration'}            <Overlay><UnregistrationDialog/></Overlay>{/if}\n      {#if $Globals.State === 'unregistering'}             <Overlay><UnregistrationNotice/></Overlay>{/if}\n      {#if $Globals.State === 'unregistered'}              <Overlay><UnregisteredNotice/></Overlay>{/if}\n      {#if $Globals.State === 'CommunicationFailure'}      <Overlay><CommunicationFailureNotice/></Overlay>{/if}\n      {#if $Globals.State === 'multipleInstances'}         <Overlay><MultiInstanceNotice/></Overlay>{/if}\n      {#if $Globals.State === 'DecryptionFailure'}         <Overlay><DecryptionFailureNotice/></Overlay>{/if}\n      {#if $Globals.State === 'ReencryptionFailure'}       <Overlay><ReencryptionFailureNotice/></Overlay>{/if}\n    </NotePage>\n  {:else}\n    {#if SubPath === '#/Legal'}\n      <LegalPage/>\n    {:else}\n      <InfoPage>\n        {#if $Globals.State === 'Registration'}        <Overlay><RegistrationDialog/></Overlay>{/if}\n        {#if $Globals.State === 'registering'}         <Overlay><RegistrationNotice/></Overlay>{/if}\n        {#if $Globals.State === 'registered'}          <Overlay><RegistrationSuccessNotice/></Overlay>{/if}\n        {#if $Globals.State === 'RegistrationFailed'}  <Overlay><RegistrationFailureNotice/></Overlay>{/if}\n        {#if $Globals.State === 'RenewalRequest'}      <Overlay><RenewalDialog/></Overlay>{/if}\n        {#if $Globals.State === 'renewing'}            <Overlay><RenewalNotice/></Overlay>{/if}\n        {#if $Globals.State === 'renewed'}             <Overlay><RenewedNotice/></Overlay>{/if}\n        {#if $Globals.State === 'confirming'}          <Overlay><ConfirmationNotice/></Overlay>{/if}\n        {#if $Globals.State === 'confirmed'}           <Overlay><ConfirmedNotice/></Overlay>{/if}\n        {#if $Globals.State === 'ResetRequest'}        <Overlay><ResetRequestDialog/></Overlay>{/if}\n        {#if $Globals.State === 'requestingReset'}     <Overlay><ResetRequestNotice/></Overlay>{/if}\n        {#if $Globals.State === 'ResetRequested'}      <Overlay><ResetRequestedNotice/></Overlay>{/if}\n        {#if $Globals.State === 'ResetPassword'}       <Overlay><PasswordResetDialog/></Overlay>{/if}\n        {#if $Globals.State === 'resettingPassword'}   <Overlay><PasswordResetNotice/></Overlay>{/if}\n        {#if $Globals.State === 'PasswordReset'}       <Overlay><PasswordResetSuccessNotice/></Overlay>{/if}\n        {#if $Globals.State === 'Login'}               <Overlay><LoginDialog/></Overlay>{/if}\n        {#if $Globals.State === 'sendingLogin'}        <Overlay><LoginNotice/></Overlay>{/if}\n        {#if $Globals.State === 'LoginFailure'}        <Overlay><LoginFailureNotice/></Overlay>{/if}\n        {#if $Globals.State === 'loggedOut'}           <Overlay><LogoutNotice/></Overlay>{/if}\n        {#if $Globals.State === 'CommunicationFailure'}<Overlay><CommunicationFailureNotice/></Overlay>{/if}\n        {#if $Globals.State === 'multipleInstances'}   <Overlay><MultiInstanceNotice/></Overlay>{/if}\n      </InfoPage>\n    {/if}\n  {/if}\n</ApplicationCell>\n",null],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","unsub","subscribe","unsubscribe","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","tar","src","k","assign","slice","get_slot_changes","dirty","lets","undefined","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_data","wholeText","set_input_value","input","set_style","key","important","style","setProperty","toggle_class","toggle","classList","current_component","set_current_component","onMount","Error","get_current_component","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","Set","flush","update","pop","has","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","globals","window","globalThis","global","create_component","mount_component","customElement","m","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","then","fill","init","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_disconnect","context","Map","skip_bound","root","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","$destroy","$on","type","index","indexOf","splice","$set","$$props","obj","$$set","keys","subscriber_queue","nacl","gf","Float64Array","randombytes","_0","Uint8Array","_9","gf0","gf1","_121665","D","D2","X","Y","I","ts64","x","h","vn","xi","y","yi","n","crypto_verify_16","crypto_verify_32","crypto_core_salsa20","out","inp","u","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x0","x1","x2","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","core_salsa20","crypto_core_hsalsa20","core_hsalsa20","sigma","crypto_stream_salsa20_xor","cpos","mpos","z","crypto_stream_salsa20","crypto_stream","s","sn","crypto_stream_xor","poly1305","t0","t1","t2","t3","t4","t5","t6","t7","buffer","Uint16Array","pad","leftover","fin","crypto_onetimeauth","outpos","finish","crypto_onetimeauth_verify","hpos","crypto_secretbox","crypto_secretbox_open","set25519","car25519","v","floor","sel25519","q","t","pack25519","j","neq25519","par25519","unpack25519","A","Z","M","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","S","inv25519","pow2523","crypto_scalarmult","e","f","x32","subarray","x16","crypto_scalarmult_base","crypto_box_keypair","crypto_box_beforenm","prototype","blocks","bytes","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","mac","macpos","mask","g","want","crypto_box_afternm","crypto_box_open_afternm","K","crypto_hashblocks_hl","hh","hl","bh0","bh1","bh2","bh3","bh4","bh5","bh6","bh7","bl0","bl1","bl2","bl3","bl4","bl5","bl6","bl7","th","tl","wh","Int32Array","wl","ah0","ah1","ah2","ah3","ah4","ah5","ah6","ah7","al0","al1","al2","al3","al4","al5","al6","al7","pos","crypto_hash","cswap","pack","tx","ty","zi","scalarmult","scalarbase","crypto_sign_keypair","pk","sk","seeded","L","modL","carry","reduce","crypto_sign","sm","smlen","crypto_sign_open","chk","num","den","den2","den4","den6","unpackneg","crypto","crypto_secretbox_BOXZEROBYTES","crypto_sign_BYTES","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","checkLengths","checkArrayTypes","arguments","TypeError","cleanup","arr","lowlevel","crypto_box","crypto_box_open","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_secretbox_ZEROBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_NONCEBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_sign_SEEDBYTES","crypto_hash_BYTES","randomBytes","secretbox","msg","nonce","open","box","keyLength","nonceLength","overheadLength","scalarMult","base","scalarLength","groupElementLength","publicKey","secretKey","before","checkBoxLengths","after","keyPair","fromSecretKey","publicKeyLength","secretKeyLength","sharedKeyLength","sign","signedMsg","tmp","mlen","detached","sig","verify","fromSeed","seed","seedLength","signatureLength","hash","hashLength","setPRNG","self","msCrypto","getRandomValues","min","require$$0","exports","module","set","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","writable","ApplicationURL","ApplicationId","AccessToken","sessionStorage","ConfirmationToken","ResetToken","EMailAddress","localStorage","Password","loggedIn","firstName","lastName","State","EncryptionKey","FailureReason","Globals","define","KeyOrObject","Value","TextEncoder","encode","styleInject","css","ref","insertAt","head","getElementsByTagName","firstChild","styleSheet","cssText","closeNotice","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","rejected","result","done","apply","__generator","body","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","op","throwError","Message","Match","exec","namedError","ValueIsString","String","emptyStringPattern","ValueIsNonEmptyString","test","valueOf","ValueIsStringMatching","Pattern","ValueIsPlainObject","getPrototypeOf","ValueIsArray","isArray","EMailAddressPattern","ValueIsEMailAddress","noCtrlCharsOrWhitespacePattern","ValueIsURL","URL","Signal","rejectNil","acceptNil","ValidatorForClassifier","Classifier","NilIsAcceptable","Expectation","Validator","Description","Argument","ValueIsValid","escaped","Boolean","Number","validatedArgument","ClassifierName","originalFunction","desiredName","defineProperty","signal","Function","renamed","FunctionWithName","replace","expectNonEmptyString","expectPlainObject","expectEMailAddress","expectURL","Text","HexCode","charCodeAt","toString","quoted","Quote","quotable","activeDeveloperId","activeDeveloperAddress","activeDeveloperPassword","activeCustomerId","activeCustomerAddress","activeCustomerPassword","activeAccessToken","currentApplicationId","currentApplicationURL","currentCustomerId","ApplicationNamePattern","focusOnApplication","_a","actOnBehalfOfCustomer","expectPassword","assertApplicationFocus","loginCustomer","focusOnNewCustomer","Response","Signal_3","ResponseOf","email","password","confirmation","scope","HTTPStatus","message","id","resendConfirmationEMailToCustomer","Signal_4","confirmCustomerUsing","Token","Signal_5","token","startPasswordResetForCustomer","Signal_6","resetCustomerPasswordUsing","Signal_7","CustomerRecord","Signal_8","assertCustomerMandate","customer_id","changeCustomerEMailAddressTo","Signal_9","assertCustomerFocus","changeCustomerPasswordTo","Signal_10","old","new","updateCustomerRecordBy","Settings","Signal_11","deleteCustomer","Signal_12","assertDeveloperOrCustomerMandate","CustomerStorageEntry","StorageKey","Signal_14","expectStorageKey","customer_storage_key","setCustomerStorageEntryTo","StorageValue","Signal_15","expectStorageValue","ValueIsPassword","toLowerCase","ValueIsApplicationName","ValueIsStorageKey","ValueIsStorageValue","loginDeveloper","firstAttempt","Signal_18","grant_type","username","token_type","access_token","user_id","Signal_19","Mode","Method","Parameters","Data","fullParameters","resolvedURL","VariableSet","application_id","application_url","PlaceholderPattern","VariableName","hasOwnProperty","Date","now","Request","XMLHttpRequest","handleError","ErrorDetails","status","Result","catch","getResponseHeader","startsWith","JSON","parse","responseText","validations","ValidationError","HTTPResponse","withCredentials","setRequestHeader","timeout","StatusCode","ContentType","handleSuccess","send","Blob","RequestBody","FormData","stringify","Details","named422Error","firstMessage","messages","contains","property","closeDialog","StatementChecked","$Globals","firstNameLooksBad","firstNameMessage","lastNameLooksBad","lastNameMessage","trim","ChangeIsForbidden","first_name","last_name","extendStatics","__extends","setPrototypeOf","__proto__","__","constructor","base64","INVALID_BYTE","Coder","_paddingCharacter","encodedLength","_encodeByte","left","maxDecodedLength","decodedLength","_getPaddingLength","decode","paddingLength","haveBad","v0","v1","v2","v3","_decodeChar","fromCharCode","stdCoder","URLSafeCoder","_super","urlSafeCoder","oldPassword","oldPasswordLooksBad","oldPasswordMessage","newPassword","newPasswordLooksBad","newPasswordMessage","newConfirmation","newConfirmationLooksBad","newConfirmationMessage","toUpperCase","NoteText","Base64Value","Buffer","console","error","Nonce","decryptedValue","TextDecoder","decrypted","encryptedValue","encrypted","constrained","Minimum","Maximum","Infinity","AddressLooksBad","AddressMessage","startRegistration","startPasswordReset","startRenewalRequest","PasswordLooksBad","PasswordMessage","LoginIsForbidden","CustomerInfo","Confirmation","ConfirmationLooksBad","ConfirmationMessage","ResetIsForbidden","SubmitIsForbidden","showLegal","startLogin","location","href","DPSAgreementChecked","DPSAgreementMessage","TOSAgreementChecked","TOSAgreementMessage","DelayTimer","DelayLimitTimer","isSaving","changedWhileSaving","performAutoSave","clearTimeout","isRefreshing","justRefreshed","performRefresh","decryptedText","Editor","setEditorHeight","Height","parentElement","clientHeight","scrollHeight","height","overflowY","setTimeout","showInfo","createAccount","resendConfirmation","resetPassword","MediaMatcher","matchMedia","MediaQuery","query","matches","DocumentIsReady","readyState","ViewportWidth","ViewportHeight","determineViewportSize","documentElement","clientWidth","innerWidth","innerHeight","ScreenOrientation","detailledScreenOrientation","determineScreenOrientation","Orientation","Name","Screen","screen","orientation","remove","Poller","oldViewportWidth","oldViewportHeight","oldScreenOrientation","oldDetailledScreenOrientation","rememberSettings","submitEvents","dispatchEvent","Event","bubbles","cancelable","PollCounter","stopPolling","clearInterval","determineViewportSizeAndScreenOrientation","setInterval","svelteViewportInfo","Width","detailledOrientation","CellX","CellWidth","CellY","CellHeight","isFullScreen","resizeApplicationCell","Viewport","completeURL","confirmAccount","SubPath"],"mappings":"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"}